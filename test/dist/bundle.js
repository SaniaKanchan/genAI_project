(()=>{var e={795:function(e,t,n){!function(e,t,n,r){"use strict";var o=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},a=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},i=function(e,t){return{startTime:t,type:"setValue",value:e}},s=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},c=function(e,t,n){var r=n.startTime,o=n.target,a=n.timeConstant;return o+(t-o)*Math.exp((r-e)/a)},l=function(e){return"exponentialRampToValue"===e.type},u=function(e){return"linearRampToValue"===e.type},d=function(e){return l(e)||u(e)},h=function(e){return"setValue"===e.type},p=function(e){return"setValueCurve"===e.type},f=function e(t,n,r,o){var a=t[n];return void 0===a?o:d(a)||h(a)?a.value:p(a)?a.values[a.values.length-1]:c(r,e(t,n-1,a.startTime,o),a)},v=function(e,t,n,r,o){return void 0===n?[r.insertTime,o]:d(n)?[n.endTime,n.value]:h(n)?[n.startTime,n.value]:p(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(e,t-1,n.startTime,o)]},m=function(e){return"cancelAndHold"===e.type},g=function(e){return"cancelScheduledValues"===e.type},y=function(e){return m(e)||g(e)?e.cancelTime:l(e)||u(e)?e.endTime:e.startTime},w=function(e,t,n,r){var o=r.endTime,a=r.value;return n===a?a:0<n&&0<a||n<0&&a<0?n*Math.pow(a/n,(e-t)/(o-t)):0},_=function(e,t,n,r){return n+(e-t)/(r.endTime-t)*(r.value-n)},b=function(e,t){var n=t.duration,r=t.startTime,o=t.values;return function(e,t){var n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]}(o,(e-r)/n*(o.length-1))},C=function(e){return"setTarget"===e.type},M=function(){return r((function e(t){n(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}),[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=y(e);if(m(e)||g(e)){var n=this._automationEvents.findIndex((function(n){return g(e)&&p(n)?n.startTime+n.duration>=t:y(n)>=t})),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),m(e)){var c=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&d(r)){if(void 0!==c&&C(c))throw new Error("The internal list is malformed.");var h=void 0===c?r.insertTime:p(c)?c.startTime+c.duration:y(c),f=void 0===c?this._defaultValue:p(c)?c.values[c.values.length-1]:c.value,v=l(r)?w(t,h,f,r):_(t,h,f,r),b=l(r)?o(v,t,this._currenTime):a(v,t,this._currenTime);this._automationEvents.push(b)}if(void 0!==c&&C(c)&&this._automationEvents.push(i(this.getValue(t),t)),void 0!==c&&p(c)&&c.startTime+c.duration>t){var M=t-c.startTime,E=(c.values.length-1)/c.duration,A=Math.max(2,1+Math.ceil(M*E)),x=M/(A-1)*E,O=c.values.slice(0,A);if(x<1)for(var T=1;T<A;T+=1){var I=x*T%1;O[T]=c.values[T-1]*(1-I)+c.values[T]*I}this._automationEvents[this._automationEvents.length-1]=s(O,c.startTime,M)}}}else{var N=this._automationEvents.findIndex((function(e){return y(e)>t})),k=-1===N?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[N-1];if(void 0!==k&&p(k)&&y(k)+k.duration>t)return!1;var S=l(e)?o(e.value,e.endTime,this._currenTime):u(e)?a(e.value,t,this._currenTime):e;if(-1===N)this._automationEvents.push(S);else{if(p(e)&&t+e.duration>y(this._automationEvents[N]))return!1;this._automationEvents.splice(N,0,S)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex((function(t){return y(t)>e}));if(t>1){var n=this._automationEvents.slice(t-1),r=n[0];C(r)&&n.unshift(i(f(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex((function(t){return y(t)>e})),r=this._automationEvents[n],o=(-1===n?this._automationEvents.length:n)-1,a=this._automationEvents[o];if(void 0!==a&&C(a)&&(void 0===r||!d(r)||r.insertTime>e))return c(e,f(this._automationEvents,o-1,a.startTime,this._defaultValue),a);if(void 0!==a&&h(a)&&(void 0===r||!d(r)))return a.value;if(void 0!==a&&p(a)&&(void 0===r||!d(r)||a.startTime+a.duration>e))return e<a.startTime+a.duration?b(e,a):a.values[a.values.length-1];if(void 0!==a&&d(a)&&(void 0===r||!d(r)))return a.value;if(void 0!==r&&l(r)){var i=v(this._automationEvents,o,a,r,this._defaultValue),s=t(i,2),m=s[0],g=s[1];return w(e,m,g,r)}if(void 0!==r&&u(r)){var M=v(this._automationEvents,o,a,r,this._defaultValue),E=t(M,2),A=E[0],x=E[1];return _(e,A,x,r)}return this._defaultValue}}])}();e.AutomationEventList=M,e.createCancelAndHoldAutomationEvent=function(e){return{cancelTime:e,type:"cancelAndHold"}},e.createCancelScheduledValuesAutomationEvent=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},e.createExponentialRampToValueAutomationEvent=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},e.createLinearRampToValueAutomationEvent=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},e.createSetTargetAutomationEvent=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}},e.createSetValueAutomationEvent=i,e.createSetValueCurveAutomationEvent=s}(t,n(715),n(383),n(579))},389:function(e,t){!function(e){"use strict";var t,n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,o=1073741824,a=new WeakMap,i=function(e,t){return function(a){var i=t.get(a),s=void 0===i?a.size:i<o?i+1:0;if(!a.has(s))return e(a,s);if(a.size<r){for(;a.has(s);)s=Math.floor(Math.random()*o);return e(a,s)}if(a.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;a.has(s);)s=Math.floor(Math.random()*n);return e(a,s)}}((t=a,function(e,n){return t.set(e,n),n}),a),s=function(e){return function(t){var n=e(t);return t.add(n),n}}(i);e.addUniqueNumber=s,e.generateUniqueNumber=i}(t)},87:function(e,t,n){!function(e,t,n,r){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=function(){return r((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;if(n(this,e),r<0||void 0!==a&&a<0)throw new RangeError;var i=t.reduce((function(e,t){return e+t.byteLength}),0);if(r>i||void 0!==a&&r+a>i)throw new RangeError;var s,c=[],l=void 0===a?i-r:a,u=[],d=0,h=r,p=o(t);try{for(p.s();!(s=p.n()).done;){var f=s.value;if(0===u.length)if(f.byteLength>h){var v=(d=f.byteLength-h)>l?l:d;c.push(new DataView(f,h,v)),u.push(f)}else h-=f.byteLength;else if(d<l){var m=(d+=f.byteLength)>l?f.byteLength-d+l:f.byteLength;c.push(new DataView(f,0,m)),u.push(f)}}}catch(e){p.e(e)}finally{p.f()}this._buffers=u,this._byteLength=l,this._byteOffset=h,this._dataViews=c,this._internalBuffer=new DataView(new ArrayBuffer(8))}),[{key:"buffers",get:function(){return this._buffers}},{key:"byteLength",get:function(){return this._byteLength}},{key:"byteOffset",get:function(){return this._byteOffset}},{key:"getFloat32",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.setUint8(2,this.getUint8(e+2)),this._internalBuffer.setUint8(3,this.getUint8(e+3)),this._internalBuffer.getFloat32(0,t)}},{key:"getFloat64",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.setUint8(2,this.getUint8(e+2)),this._internalBuffer.setUint8(3,this.getUint8(e+3)),this._internalBuffer.setUint8(4,this.getUint8(e+4)),this._internalBuffer.setUint8(5,this.getUint8(e+5)),this._internalBuffer.setUint8(6,this.getUint8(e+6)),this._internalBuffer.setUint8(7,this.getUint8(e+7)),this._internalBuffer.getFloat64(0,t)}},{key:"getInt16",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.getInt16(0,t)}},{key:"getInt32",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.setUint8(2,this.getUint8(e+2)),this._internalBuffer.setUint8(3,this.getUint8(e+3)),this._internalBuffer.getInt32(0,t)}},{key:"getInt8",value:function(e){var n=this._findDataViewWithOffset(e),r=t(n,2),o=r[0],a=r[1];return o.getInt8(e-a)}},{key:"getUint16",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.getUint16(0,t)}},{key:"getUint32",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.setUint8(2,this.getUint8(e+2)),this._internalBuffer.setUint8(3,this.getUint8(e+3)),this._internalBuffer.getUint32(0,t)}},{key:"getUint8",value:function(e){var n=this._findDataViewWithOffset(e),r=t(n,2),o=r[0],a=r[1];return o.getUint8(e-a)}},{key:"setFloat32",value:function(e,t,n){this._internalBuffer.setFloat32(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1)),this.setUint8(e+2,this._internalBuffer.getUint8(2)),this.setUint8(e+3,this._internalBuffer.getUint8(3))}},{key:"setFloat64",value:function(e,t,n){this._internalBuffer.setFloat64(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1)),this.setUint8(e+2,this._internalBuffer.getUint8(2)),this.setUint8(e+3,this._internalBuffer.getUint8(3)),this.setUint8(e+4,this._internalBuffer.getUint8(4)),this.setUint8(e+5,this._internalBuffer.getUint8(5)),this.setUint8(e+6,this._internalBuffer.getUint8(6)),this.setUint8(e+7,this._internalBuffer.getUint8(7))}},{key:"setInt16",value:function(e,t,n){this._internalBuffer.setInt16(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1))}},{key:"setInt32",value:function(e,t,n){this._internalBuffer.setInt32(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1)),this.setUint8(e+2,this._internalBuffer.getUint8(2)),this.setUint8(e+3,this._internalBuffer.getUint8(3))}},{key:"setInt8",value:function(e,n){var r=this._findDataViewWithOffset(e),o=t(r,2),a=o[0],i=o[1];a.setInt8(e-i,n)}},{key:"setUint16",value:function(e,t,n){this._internalBuffer.setUint16(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1))}},{key:"setUint32",value:function(e,t,n){this._internalBuffer.setUint32(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1)),this.setUint8(e+2,this._internalBuffer.getUint8(2)),this.setUint8(e+3,this._internalBuffer.getUint8(3))}},{key:"setUint8",value:function(e,n){var r=this._findDataViewWithOffset(e),o=t(r,2),a=o[0],i=o[1];a.setUint8(e-i,n)}},{key:"_findDataViewWithOffset",value:function(e){var t,n=0,r=o(this._dataViews);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=n+a.byteLength;if(e>=n&&e<i)return[a,n];n=i}}catch(e){r.e(e)}finally{r.f()}throw new RangeError}}])}();e.MultiBufferDataView=i}(t,n(715),n(383),n(579))},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,n)=>{var r=n(736);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}e.exports=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,n)=>{var r=n(987),o=n(156),a=n(122),i=n(752);e.exports=function(e,t){return r(e)||o(e,t)||a(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var r=n(738).default,o=n(45);e.exports=function(e){var t=o(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,n)=>{var r=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}(()=>{"use strict";var e=n(389);const t=new WeakMap,r=new WeakMap,o=n=>{const o=(a=n,{...a,connect:({call:e})=>async()=>{const{port1:n,port2:r}=new MessageChannel,o=await e("connect",{port:n},[n]);return t.set(r,o),r},disconnect:({call:e})=>async n=>{const r=t.get(n);if(void 0===r)throw new Error("The given port is not connected.");await e("disconnect",{portId:r})},isSupported:({call:e})=>()=>e("isSupported")});var a;return t=>{const n=(e=>{if(r.has(e))return r.get(e);const t=new Map;return r.set(e,t),t})(t);t.addEventListener("message",(({data:e})=>{const{id:t}=e;if(null!==t&&n.has(t)){const{reject:r,resolve:o}=n.get(t);n.delete(t),void 0===e.error?o(e.result):r(new Error(e.error.message))}})),(e=>"function"==typeof e.start)(t)&&t.start();const a=(r,o=null,a=[])=>new Promise(((i,s)=>{const c=(0,e.generateUniqueNumber)(n);n.set(c,{reject:s,resolve:i}),null===o?t.postMessage({id:c,method:r},a):t.postMessage({id:c,method:r,params:o},a)})),i=(e,n,r=[])=>{t.postMessage({id:null,method:e,params:n},r)};let s={};for(const[e,t]of Object.entries(o))s={...s,[e]:t({call:a,notify:i})};return{...s}}},a=new Set,i=o({encode:({call:e})=>async(t,n)=>{const r=await e("encode",{encoderId:t,timeslice:n});return a.delete(t),r},instantiate:({call:t})=>async(n,r)=>{const o=(0,e.addUniqueNumber)(a);return{encoderId:o,port:await t("instantiate",{encoderId:o,mimeType:n,sampleRate:r})}},register:({call:e})=>t=>e("register",{port:t},[t])}),s=new Blob(['(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),c=void 0===a?r.size:a<s?a+1:0;if(!r.has(c))return e(r,c);if(r.size<o){for(;r.has(c);)c=Math.floor(Math.random()*s);return e(r,c)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(c);)c=Math.floor(Math.random()*n);return e(r,c)}},c=new WeakMap,i=r(c),l=a(i,c),u=t(l);e.addUniqueNumber=u,e.generateUniqueNumber=l}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o(\'The handler of the method called "\'.concat(t,\'" returned an unexpected result.\'),e),a=(t,r)=>async a=>{let{data:{id:c,method:i,params:l}}=a;const u=r[i];try{if(void 0===u)throw(e=>o(\'The requested method called "\'.concat(e,\'" is not supported.\'),n))(i);const r=void 0===l?u():u(l);if(void 0===r)throw(t=>o(\'The handler of the method called "\'.concat(t,\'" returned no required result.\'),e))(i);const a=r instanceof Promise?await r:r;if(null===c){if(void 0!==a.result)throw s(i)}else{if(void 0===a.result)throw s(i);const{result:e,transferables:r=[]}=a;t.postMessage({id:c,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:c})}};var c=r(455);const i=new Map,l=(e,r,n)=>({...r,connect:t=>{let{port:n}=t;n.start();const o=e(n,r),s=(0,c.generateUniqueNumber)(i);return i.set(s,(()=>{o(),n.close(),i.delete(s)})),{result:s}},disconnect:e=>{let{portId:r}=e;const n=i.get(r);if(void 0===n)throw(e=>o(\'The specified parameter called "portId" with the given value "\'.concat(e,\'" does not identify a port connected to this worker.\'),t))(r);return n(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),u=function(e,t){const r=l(u,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=a(e,r);return e.addEventListener("message",n),()=>e.removeEventListener("message",n)},d=e=>{e.onmessage=null,e.close()},h=new WeakMap,f=new WeakMap,p=(e=>{const t=(r=e,{...r,connect:e=>{let{call:t}=e;return async()=>{const{port1:e,port2:r}=new MessageChannel,n=await t("connect",{port:e},[e]);return h.set(r,n),r}},disconnect:e=>{let{call:t}=e;return async e=>{const r=h.get(e);if(void 0===r)throw new Error("The given port is not connected.");await t("disconnect",{portId:r})}},isSupported:e=>{let{call:t}=e;return()=>t("isSupported")}});var r;return e=>{const r=(e=>{if(f.has(e))return f.get(e);const t=new Map;return f.set(e,t),t})(e);e.addEventListener("message",(e=>{let{data:t}=e;const{id:n}=t;if(null!==n&&r.has(n)){const{reject:e,resolve:o}=r.get(n);r.delete(n),void 0===t.error?o(t.result):e(new Error(t.error.message))}})),(e=>"function"==typeof e.start)(e)&&e.start();const n=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((s,a)=>{const i=(0,c.generateUniqueNumber)(r);r.set(i,{reject:a,resolve:s}),null===n?e.postMessage({id:i,method:t},o):e.postMessage({id:i,method:t,params:n},o)}))},o=function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.postMessage({id:null,method:t,params:r},n)};let s={};for(const[e,r]of Object.entries(t))s={...s,[e]:r({call:n,notify:o})};return{...s}}})({characterize:e=>{let{call:t}=e;return()=>t("characterize")},encode:e=>{let{call:t}=e;return(e,r)=>t("encode",{recordingId:e,timeslice:r})},record:e=>{let{call:t}=e;return async(e,r,n)=>{await t("record",{recordingId:e,sampleRate:r,typedArrays:n},n.map((e=>{let{buffer:t}=e;return t})))}}}),w=async(e,t)=>{const r=p(t),n=await r.characterize(),o=n.toString();if(e.has(o))throw new Error("There is already an encoder stored which handles exactly the same mime types.");return e.set(o,[n,r]),n},m=new Map,g=(e=>t=>{const r=e.get(t);if(void 0===r)throw new Error("There was no instance of an encoder stored with the given id.");return r})(m),v=((e,t)=>r=>{const n=t(r);return e.delete(r),n})(m,g),y=new Map,M=((e,t)=>r=>{const[n,o,s,a]=t(r);return s?new Promise((t=>{o.onmessage=s=>{let{data:c}=s;0===c.length?(e(o),t(n.encode(r,null))):n.record(r,a,c)}})):n.encode(r,null)})(d,v),E=(e=>t=>{for(const[r,n]of Array.from(e.values()))if(r.test(t))return n;throw new Error("There is no encoder registered which could handle the given mimeType.")})(y),b=((e,t,r)=>(n,o,s)=>{if(t.has(n))throw new Error(\'There is already an encoder registered with an id called "\'.concat(n,\'".\'));const a=r(o),{port1:c,port2:i}=new MessageChannel,l=[a,c,!0,s];return t.set(n,l),c.onmessage=t=>{let{data:r}=t;0===r.length?(e(c),l[2]=!1):a.record(n,s,r.map((e=>"number"==typeof e?new Float32Array(e):e)))},i})(d,m,E),T=(e=>(t,r)=>{const[n]=e(t);return n.encode(t,r)})(g);u(self,{encode:async e=>{let{encoderId:t,timeslice:r}=e;const n=null===r?await M(t):await T(t,r);return{result:n,transferables:n}},instantiate:e=>{let{encoderId:t,mimeType:r,sampleRate:n}=e;const o=b(t,r,n);return{result:o,transferables:[o]}},register:async e=>{let{port:t}=e;return{result:await w(y,t)}}})})()})();'],{type:"application/javascript; charset=utf-8"}),c=URL.createObjectURL(s),l=(e=>{const t=new Worker(e);return i(t)})(c),u=(l.connect,l.disconnect,l.encode),d=l.instantiate,h=(l.isSupported,l.register);URL.revokeObjectURL(c);const p=()=>{try{return new DOMException("","NotSupportedError")}catch(e){return e.code=9,e.name="NotSupportedError",e}},f=Symbol.observable||"@@observable",v=()=>{},m=e=>{throw e},g=e=>(e.error(new Error("The required browser API seems to be not supported.")),()=>{}),y="undefined"==typeof window?null:window,w=((e,t)=>{const n=()=>{};return e=>{const r=(...r)=>{const o=e((e=>"function"==typeof e[0])(r)?t({next:r[0]}):t(...r));return void 0!==o?o:n};return r[Symbol.observable]=()=>({subscribe:(...e)=>({unsubscribe:r(...e)})}),o=r,Symbol.observable||("function"==typeof o&&o.prototype&&o.prototype[Symbol.observable]?(o.prototype[f]=o.prototype[Symbol.observable],delete o.prototype[Symbol.observable]):(o[f]=o[Symbol.observable],delete o[Symbol.observable])),o;var o}})(0,(function(e){return e?e.next&&e.error&&e.complete?e:{complete:(e.complete??v).bind(e),error:(e.error??m).bind(e),next:(e.next??v).bind(e)}:{complete:v,error:m,next:v}})),_=(((e,t,n)=>{})(g,y,w),(e=>{})(w),(e=>{})(w),(e=>(t,n,r)=>e((e=>{const o=t=>e.next(t);return t.addEventListener(n,o,r),()=>t.removeEventListener(n,o,r)})))(w)),b=(new Map,E=Blob,A=URL,async e=>{const t=new E(['(()=>{"use strict";class e extends AudioWorkletProcessor{constructor(){super(),this._encoderPort=null,this._numberOfChannels=0,this._state="inactive",this.port.onmessage=e=>{let{data:t}=e;"pause"===t.method?"active"===this._state||"recording"===this._state?(this._state="paused",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"record"===t.method?"inactive"===this._state?(this._encoderPort=t.params.encoderPort,this._state="active",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"resume"===t.method?"paused"===this._state?(this._state="active",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"stop"===t.method?"active"!==this._state&&"paused"!==this._state&&"recording"!==this._state||null===this._encoderPort?this._sendUnexpectedStateError(t.id):(this._stop(this._encoderPort),this._sendAcknowledgement(t.id)):"number"==typeof t.id&&this.port.postMessage({error:{code:-32601,message:"The requested method is not supported."},id:t.id})}}process(e){let[t]=e;if("inactive"===this._state||"paused"===this._state)return!0;if("active"===this._state){if(void 0===t)throw new Error("No channelData was received for the first input.");if(0===t.length)return!0;this._state="recording"}if("recording"===this._state&&null!==this._encoderPort){if(void 0===t)throw new Error("No channelData was received for the first input.");return 0===t.length?this._encoderPort.postMessage(Array.from({length:this._numberOfChannels},(()=>128))):(this._encoderPort.postMessage(t,t.map((e=>{let{buffer:t}=e;return t}))),this._numberOfChannels=t.length),!0}return!1}_sendAcknowledgement(e){this.port.postMessage({id:e,result:null})}_sendUnexpectedStateError(e){this.port.postMessage({error:{code:-32603,message:"The internal state does not allow to process the given message."},id:e})}_stop(e){e.postMessage([]),e.close(),this._encoderPort=null,this._state="stopped"}}e.parameterDescriptors=[],registerProcessor("recorder-audio-worklet-processor",e)})();'],{type:"application/javascript; charset=utf-8"}),n=A.createObjectURL(t);try{await e(n)}finally{A.revokeObjectURL(n)}}),C=((e,t,n,r)=>(e,o,a={})=>{const i=new e(o,"recorder-audio-worklet-processor",{...a,channelCountMode:"explicit",numberOfInputs:1,numberOfOutputs:0}),s=new Map,c=t(s,i.port),l=n(i.port,"message")((e=>({data:t})=>{const{id:n}=t;if(null!==n){const r=e.get(n);if(void 0!==r){const{reject:o,resolve:a}=r;e.delete(n),void 0===t.error?a(t.result):o(new Error(t.error.message))}}})(s));i.port.start();let u="inactive";return Object.defineProperties(i,{pause:{get:()=>async()=>(r(["recording"],u),u="paused",c({method:"pause"}))},port:{get(){throw new Error("The port of a RecorderAudioWorkletNode can't be accessed.")}},record:{get:()=>async e=>(r(["inactive"],u),u="recording",c({method:"record",params:{encoderPort:e}},[e]))},resume:{get:()=>async()=>(r(["paused"],u),u="recording",c({method:"resume"}))},stop:{get:()=>async()=>{r(["paused","recording"],u),u="stopped";try{await c({method:"stop"})}finally{l()}}}}),i})(0,(M=e.generateUniqueNumber,(e,t)=>(n,r=[])=>new Promise(((o,a)=>{const i=M(e);e.set(i,{reject:a,resolve:o}),t.postMessage({id:i,...n},r)}))),_,((e,t)=>{if(!e.includes(t))throw new Error(`Expected the state to be ${e.map((e=>`"${e}"`)).join(" or ")} but it was "${t}".`)}));var M,E,A,x=n(795);const O=new WeakSet,T=new WeakMap,I=new WeakMap,N=new WeakMap,k=new WeakMap,S=new WeakMap,R=new WeakMap,D=new WeakMap,U=new WeakMap,L=new WeakMap,B={construct:()=>B},P=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,F=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),o=r.match(P);for(;null!==o;){const e=o[1].slice(1,-1),a=o[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(a),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(P)}return[n.join(";"),r]},V=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},W=e=>{if(!(e=>{try{new new Proxy(e,B)}catch{return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},j=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},q=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return e.delete(r),r},z=(e,t,n,r)=>{const o=j(e,t),a=q(o,(e=>e[0]===n&&e[1]===r));return 0===o.size&&e.delete(t),a},X=e=>j(R,e),Y=e=>{if(O.has(e))throw new Error("The AudioNode is already stored.");O.add(e),X(e).forEach((e=>e(!0)))},Z=e=>"port"in e,G=e=>{if(!O.has(e))throw new Error("The AudioNode is not stored.");O.delete(e),X(e).forEach((e=>e(!1)))},$=(e,t)=>{!Z(e)&&t.every((e=>0===e.size))&&G(e)},H={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Q=(e,t)=>e.context===t,J=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},K=()=>new DOMException("","IndexSizeError"),ee=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(e){if(12===e.code)throw K();throw e}})},te={numberOfChannels:1},ne=-34028234663852886e22,re=-ne,oe=e=>O.has(e),ae={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ie=e=>j(T,e),se=e=>j(N,e),ce=(e,t)=>{const{activeInputs:n}=ie(e);n.forEach((n=>n.forEach((([n])=>{t.includes(e)||ce(n,[...t,e])}))));const r=(e=>"playbackRate"in e)(e)?[e.playbackRate]:Z(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e)(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const e of r){const n=se(e);void 0!==n&&n.activeInputs.forEach((([e])=>ce(e,t)))}oe(e)&&G(e)},le=e=>"context"in e,ue=e=>le(e[0]),de=(e,t,n,r)=>{for(const t of e)if(n(t)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},he=(e,t,[n,r],o)=>{de(e,[t,n,r],(e=>e[0]===t&&e[1]===n),o)},pe=(e,[t,n,r],o)=>{const a=e.get(t);void 0===a?e.set(t,new Set([[n,r]])):de(a,[n,r],(e=>e[0]===n),o)},fe=e=>"inputs"in e,ve=(e,t,n,r)=>{if(fe(t)){const o=t.inputs[r];return e.connect(o,n,0),[o,n,0]}return e.connect(t,n,r),[t,n,r]},me=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},ge=(e,t)=>{if(!X(e).delete(t))throw new Error("Missing the expected event listener.")},ye=(e,t,n)=>{const r=j(e,t),o=q(r,(e=>e[0]===n));return 0===r.size&&e.delete(t),o},we=(e,t,n,r)=>{fe(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},_e=e=>j(I,e),be=e=>j(k,e),Ce=e=>D.has(e),Me=e=>!O.has(e),Ee=(e,t)=>new Promise((n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),r=e.createGain(),o=e.createBuffer(1,2,44100),a=o.getChannelData(0);a[0]=1,a[1]=1;const i=e.createBufferSource();i.buffer=o,i.loop=!0,i.connect(t).connect(e.destination),i.connect(r),i.disconnect(r),t.onaudioprocess=r=>{const o=r.inputBuffer.getChannelData(0);Array.prototype.some.call(o,(e=>1===e))?n(!0):n(!1),i.stop(),t.onaudioprocess=null,i.disconnect(t),t.disconnect(e.destination)},i.start()}})),Ae=(e,t)=>{const n=new Map;for(const t of e)for(const e of t){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach(((e,n)=>t(n,e)))},xe=e=>"context"in e,Oe=e=>{const t=new Map;var n,r;e.connect=(r=e.connect.bind(e),(e,n=0,o=0)=>{const a=xe(e)?r(e,n,o):r(e,n),i=t.get(e);return void 0===i?t.set(e,[{input:o,output:n}]):i.every((e=>e.input!==o||e.output!==n))&&i.push({input:o,output:n}),a}),e.disconnect=(n=e.disconnect,(r,o,a)=>{if(n.apply(e),void 0===r)t.clear();else if("number"==typeof r)for(const[e,n]of t){const o=n.filter((e=>e.output!==r));0===o.length?t.delete(e):t.set(e,o)}else if(t.has(r))if(void 0===o)t.delete(r);else{const e=t.get(r);if(void 0!==e){const n=e.filter((e=>e.output!==o&&(e.input!==a||void 0===a)));0===n.length?t.delete(r):t.set(r,n)}}for(const[n,r]of t)r.forEach((t=>{xe(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)}))})},Te=(e,t,n,r,o)=>{const[a,i]=((e,t,n,r)=>{const{activeInputs:o,passiveInputs:a}=ie(t),i=me(o[r],e,n);return null===i?[z(a,e,n,r)[2],!1]:[i[2],!0]})(e,n,r,o);if(null!==a&&(ge(e,a),!i||t||Ce(e)||we(_e(e),_e(n),r,o)),oe(n)){const{activeInputs:e}=ie(n);$(n,e)}},Ie=(e,t,n,r)=>{const[o,a]=((e,t,n)=>{const{activeInputs:r,passiveInputs:o}=se(t),a=me(r,e,n);return null===a?[ye(o,e,n)[1],!1]:[a[2],!0]})(e,n,r);null!==o&&(ge(e,o),!a||t||Ce(e)||_e(e).disconnect(be(n),r))};class Ne{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach(((n,r)=>e.call(t,n,r,this)))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const ke={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Se(e,t,n,r,o){if("function"==typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,o);else{const a=e.getChannelData(r);if(0===t[n].byteLength)t[n]=a.slice(o,o+128);else{const e=new Float32Array(a.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const Re=(e,t,n,r,o)=>{"function"==typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],r,o):0!==t[n].byteLength&&e.getChannelData(r).set(t[n],o)},De=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const e=[],o="number"==typeof t?t:t[r];for(let t=0;t<o;t+=1)e.push(new Float32Array(128));n.push(e)}return n},Ue=async(e,t,n,r,o,a,i)=>{const s=null===t?128*Math.ceil(e.context.length/128):t.length,c=r.channelCount*r.numberOfInputs,l=o.reduce(((e,t)=>e+t),0),u=0===l?null:n.createBuffer(l,s,n.sampleRate);if(void 0===a)throw new Error("Missing the processor constructor.");const d=ie(e),h=await((e,t)=>{const n=j(L,e),r=_e(t);return j(n,r)})(n,e),p=De(r.numberOfInputs,r.channelCount),f=De(r.numberOfOutputs,o),v=Array.from(e.parameters.keys()).reduce(((e,t)=>({...e,[t]:new Float32Array(128)})),{});for(let l=0;l<s;l+=128){if(r.numberOfInputs>0&&null!==t)for(let e=0;e<r.numberOfInputs;e+=1)for(let n=0;n<r.channelCount;n+=1)Se(t,p[e],n,n,l);void 0!==a.parameterDescriptors&&null!==t&&a.parameterDescriptors.forEach((({name:e},n)=>{Se(t,v,e,c+n,l)}));for(let e=0;e<r.numberOfInputs;e+=1)for(let t=0;t<o[e];t+=1)0===f[e][t].byteLength&&(f[e][t]=new Float32Array(128));try{const e=p.map(((e,t)=>0===d.activeInputs[t].size?[]:e)),t=i(l/n.sampleRate,n.sampleRate,(()=>h.process(e,f,v)));if(null!==u)for(let e=0,t=0;e<r.numberOfOutputs;e+=1){for(let n=0;n<o[e];n+=1)Re(u,f[e],n,t+n,l);t+=o[e]}if(!t)break}catch(t){e.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}));break}}return u},Le={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Be={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Pe={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Fe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Ve={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},We=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise((r=>{const o=()=>{n.onmessage=null,t.close(),n.close(),r()};n.onmessage=()=>o();try{t.postMessage(e,[e])}catch{}finally{o()}}))},je={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},qe=(e,t,n)=>{const r=t[n];if(void 0===r)throw e();return r},ze={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Xe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ye=()=>new DOMException("","InvalidStateError"),Ze=()=>new DOMException("","InvalidAccessError"),Ge={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},$e=(e,t,n,r,o,a,i,s,c,l,u)=>{const d=l.length;let h=s;for(let s=0;s<d;s+=1){let d=n[0]*l[s];for(let t=1;t<o;t+=1){const r=h-t&c-1;d+=n[t]*a[r],d-=e[t]*i[r]}for(let e=o;e<r;e+=1)d+=n[e]*a[h-e&c-1];for(let n=o;n<t;n+=1)d-=e[n]*i[h-n&c-1];a[h]=l[s],i[h]=d,h=h+1&c-1,u[s]=d}return h},He={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Qe=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},Je=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n]&&(e[n]=r)},Ke=(e,t)=>{Je(e,t,"channelCount"),Je(e,t,"channelCountMode"),Je(e,t,"channelInterpretation")},et=e=>"function"==typeof e.getFloatTimeDomainData,tt=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n].value&&(e[n].value=r)},nt=e=>{var t;e.start=(t=e.start,(n=0,r=0,o)=>{if("number"==typeof o&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,o)})},rt=e=>{var t;e.stop=(t=e.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},ot=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),at=(e,t)=>{const n=e.createBiquadFilter();return Ke(n,t),tt(n,t,"Q"),tt(n,t,"detune"),tt(n,t,"frequency"),tt(n,t,"gain"),Je(n,t,"type"),n},it=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Ke(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Ye()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw Ye()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw Ye()}})})(n),n},st=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),ct=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Ke(n,t),tt(n,t,"delayTime"),n},lt=(e,t)=>{const n=e.createGain();return Ke(n,t),tt(n,t,"gain"),n};function ut(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function dt(e,t){let n=[0,0];for(let a=e.length-1;a>=0;a-=1)o=t,n=[(r=n)[0]*o[0]-r[1]*o[1],r[0]*o[1]+r[1]*o[0]],n[0]+=e[a];var r,o;return n}const ht=(e,t,n,r)=>e.createScriptProcessor(t,n,r),pt=()=>new DOMException("","NotSupportedError"),ft={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},vt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},mt={disableNormalization:!1},gt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},yt=()=>new DOMException("","UnknownError"),wt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},_t=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),bt=e=>{if(null===e)return!1;const t=e.length;return t%2!=0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},Ct=(e,t,n,r)=>{let o=e;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:a,set:i}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(e,t,{get:n(a),set:r(i)})},Mt=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(9!==r.code)throw r;Mt(e,t,n+1e-7)}},Et=e=>{const t=e.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},At=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},xt=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},Ot=(e,t)=>{const n=t.createGain();e.connect(n);const r=(o=e.disconnect,()=>{o.call(e,n),e.removeEventListener("ended",r)});var o;e.addEventListener("ended",r),st(e,n),e.stop=(t=>{let r=!1;return(o=0)=>{if(r)try{t.call(e,o)}catch{n.gain.setValueAtTime(0,o)}else t.call(e,o),r=!0}})(e.stop)},Tt=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof t?t.call(e,n):t.handleEvent.call(e,n)},It=(e=>(t,n,[r,o,a],i)=>{e(t[o],[n,r,a],(e=>e[0]===n&&e[1]===r),i)})(de),Nt=(e=>(t,n,[r,o,a],i)=>{const s=t.get(r);void 0===s?t.set(r,new Set([[o,n,a]])):e(s,[o,n,a],(e=>e[0]===o&&e[1]===n),i)})(de),kt=(e=>(t,n,r,o)=>e(t[o],(e=>e[0]===n&&e[1]===r)))(q),St=new WeakMap,Rt=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(St),Dt=(Ut=new Map,Lt=new WeakMap,(e,t)=>{const n=Lt.get(e);if(void 0!==n)return n;const r=Ut.get(e);if(void 0!==r)return r;try{const n=t();return n instanceof Promise?(Ut.set(e,n),n.catch((()=>!1)).then((t=>(Ut.delete(e),Lt.set(e,t),t)))):(Lt.set(e,n),n)}catch{return Lt.set(e,!1),!1}});var Ut,Lt;const Bt="undefined"==typeof window?null:window,Pt=((e,t)=>(n,r)=>{const o=n.createAnalyser();if(Ke(o,r),!(r.maxDecibels>r.minDecibels))throw t();return Je(o,r,"fftSize"),Je(o,r,"maxDecibels"),Je(o,r,"minDecibels"),Je(o,r,"smoothingTimeConstant"),e(et,(()=>et(o)))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const r=Math.max(n.length,e.fftSize);for(let e=0;e<r;e+=1)t[e]=.0078125*(n[e]-128);return t}})(o),o})(Dt,K),Ft=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(ie),Vt=((e,t,n)=>async(r,o,a)=>{const i=e(r);await Promise.all(i.activeInputs.map(((e,i)=>Array.from(e).map((async([e,s])=>{const c=t(e),l=await c.render(e,o),u=r.context.destination;n(e)||r===u&&n(r)||l.connect(a,s,i)})))).reduce(((e,t)=>[...e,...t]),[]))})(ie,Ft,Ce),Wt=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!Q(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant};i=e(a,t)}return r.set(a,i),await n(o,a,i),i})(o,a)}}})(Pt,_e,Vt),jt=(qt=S,e=>{const t=qt.get(e);if(void 0===t)throw Ye();return t});var qt;const zt=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(Bt),Xt=(e=>t=>null!==e&&t instanceof e)(zt),Yt=new WeakMap,Zt=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,r){if(null!==n){let o=this._listeners.get(n);void 0===o&&(o=e(this,n),"function"==typeof n&&this._listeners.set(n,o)),this._nativeEventTarget.addEventListener(t,o,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(Tt),Gt=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(Bt),$t=(e=>t=>null!==e&&t instanceof e)(Gt),Ht=(e=>t=>null!==e&&"function"==typeof e.AudioNode&&t instanceof e.AudioNode)(Bt),Qt=(e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam)(Bt),Jt=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(Bt),Kt=((e,t,n,r,o,a,i,s,c,l,u,d,h,p,f,v)=>class extends l{constructor(t,r,o,a){super(o),this._context=t,this._nativeAudioNode=o;const i=u(t);d(i)&&!0!==n(Ee,(()=>Ee(i,v)))&&Oe(o),I.set(this,o),R.set(this,new Set),"closed"!==t.state&&r&&Y(this),e(this,a,o)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,n=0,s=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw o();const l=u(this._context),d=f(l);if(h(e)||p(e))throw a();if(le(e)){const o=_e(e);try{const t=ve(this._nativeAudioNode,o,n,s),r=Me(this);(d||r)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!r&&Me(e)&&Y(e)}catch(e){if(12===e.code)throw a();throw e}if(t(this,e,n,s,d)){const t=c([this],e);Ae(t,r(d))}return e}const v=be(e);if("playbackRate"===v.name&&1024===v.maxValue)throw i();try{this._nativeAudioNode.connect(v,n),(d||Me(this))&&this._nativeAudioNode.disconnect(v,n)}catch(e){if(12===e.code)throw a();throw e}if(((e,t,n,r)=>{const{activeInputs:o,passiveInputs:a}=se(t),{outputs:i}=ie(e),s=X(e),c=i=>{const s=_e(e),c=be(t);if(i){const t=ye(a,e,n);he(o,e,t,!1),r||Ce(e)||s.connect(c,n)}else{const t=((e,t,n)=>q(e,(e=>e[0]===t&&e[1]===n)))(o,e,n);pe(a,t,!1),r||Ce(e)||s.disconnect(c,n)}};return!!de(i,[t,n],(e=>e[0]===t&&e[1]===n),!0)&&(s.add(c),oe(e)?he(o,e,[n,c],!0):pe(a,[e,n,c],!0),!0)})(this,e,n,d)){const t=c([this],e);Ae(t,r(d))}}disconnect(e,t,n){let r;const i=u(this._context),l=f(i);if(void 0===e)r=((e,t)=>{const n=ie(e),r=[];for(const o of n.outputs)ue(o)?Te(e,t,...o):Ie(e,t,...o),r.push(o[0]);return n.outputs.clear(),r})(this,l);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw o();r=((e,t,n)=>{const r=ie(e),o=[];for(const a of r.outputs)a[1]===n&&(ue(a)?Te(e,t,...a):Ie(e,t,...a),o.push(a[0]),r.outputs.delete(a));return o})(this,l,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw o();if(le(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw o();if(r=((e,t,n,r,o)=>{const a=ie(e);return Array.from(a.outputs).filter((e=>!(e[0]!==n||void 0!==r&&e[1]!==r||void 0!==o&&e[2]!==o))).map((n=>(ue(n)?Te(e,t,...n):Ie(e,t,...n),a.outputs.delete(n),n[0])))})(this,l,e,t,n),0===r.length)throw a()}for(const e of r){const t=c([this],e);Ae(t,s)}}})((en=T,(e,t,n)=>{const r=[];for(let e=0;e<n.numberOfInputs;e+=1)r.push(new Set);en.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,r,o,a,i,s,c,l,u,d,h)=>{const p=new WeakMap;return(f,v,m,g,y)=>{const{activeInputs:w,passiveInputs:_}=a(v),{outputs:b}=a(f),C=s(f),M=a=>{const s=c(v),l=c(f);if(a){const t=z(_,f,m,g);e(w,f,t,!1),y||d(f)||n(l,s,m,g),h(v)&&Y(v)}else{const e=r(w,f,m,g);t(_,g,e,!1),y||d(f)||o(l,s,m,g);const n=i(v);if(0===n)u(v)&&$(v,w);else{const e=p.get(v);void 0!==e&&clearTimeout(e),p.set(v,setTimeout((()=>{u(v)&&$(v,w)}),1e3*n))}}};return!!l(b,[v,m,g],(e=>e[0]===v&&e[1]===m&&e[2]===g),!0)&&(C.add(M),u(f)?e(w,f,[m,g,M],!0):t(_,g,[f,m,M],!0),!0)}})(It,Nt,ve,kt,we,ie,Rt,X,_e,de,oe,Ce,Me),Dt,((e,t,n,r,o,a)=>i=>(s,c)=>{const l=e.get(s);if(void 0===l){if(!i&&a(s)){const e=r(s),{outputs:a}=n(s);for(const n of a)if(ue(n)){const o=r(n[0]);t(e,o,n[1],n[2])}else{const t=o(n[0]);e.disconnect(t,n[1])}}e.set(s,c)}else e.set(s,l+c)})(D,we,ie,_e,be,oe),K,Ze,pt,((e,t,n,r,o,a,i,s)=>(c,l)=>{const u=t.get(c);if(void 0===u)throw new Error("Missing the expected cycle count.");const d=a(c.context),h=s(d);if(u===l){if(t.delete(c),!h&&i(c)){const t=r(c),{outputs:a}=n(c);for(const n of a)if(ue(n)){const o=r(n[0]);e(t,o,n[1],n[2])}else{const e=o(n[0]);t.connect(e,n[1])}}}else t.set(c,u-l)})(ve,D,ie,_e,be,jt,oe,Xt),((e,t,n)=>function r(o,a){const i=le(a)?a:n(e,a);if((e=>"delayTime"in e)(i))return[];if(o[0]===i)return[o];if(o.includes(i))return[];const{outputs:s}=t(i);return Array.from(s).map((e=>r([...o,i],e[0]))).reduce(((e,t)=>e.concat(t)),[])})(Yt,ie,j),Zt,jt,$t,Ht,Qt,Xt,Jt);var en;const tn=((e,t,n,r,o,a)=>class extends e{constructor(e,n){const i=o(e),s={...H,...n},c=r(i,s);super(e,!1,c,a(i)?t():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(Kt,Wt,K,Pt,jt,Xt),nn=new WeakSet,rn=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(Bt),on=(an=new Uint32Array(1),e=>(an[0]=e,an[0]));var an;const sn=((e,t)=>n=>{n.copyFromChannel=(r,o,a=0)=>{const i=e(a),s=e(o);if(s>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(s),u=r.length;for(let e=i<0?-i:0;e+i<c&&e<u;e+=1)r[e]=l[e+i]},n.copyToChannel=(r,o,a=0)=>{const i=e(a),s=e(o);if(s>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(s),u=r.length;for(let e=i<0?-i:0;e+i<c&&e<u;e+=1)l[e+i]=r[e]}})(on,K),cn=(e=>t=>{t.copyFromChannel=(n=>(r,o,a=0)=>{const i=e(a),s=e(o);if(i<t.length)return n.call(t,r,s,i)})(t.copyFromChannel),t.copyToChannel=(n=>(r,o,a=0)=>{const i=e(a),s=e(o);if(i<t.length)return n.call(t,r,s,i)})(t.copyToChannel)})(on),ln=((e,t,n,r,o,a,i,s)=>{let c=null;return class l{constructor(l){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:d,sampleRate:h}={...te,...l};null===c&&(c=new o(1,1,44100));const p=null!==r&&t(a,a)?new r({length:u,numberOfChannels:d,sampleRate:h}):c.createBuffer(d,u,h);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(i(p),ee(p)):t(J,(()=>J(p)))||s(p),e.add(p),p}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===l.prototype||e.has(t)}}})(nn,Dt,pt,rn,zt,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0})(rn),sn,cn),un=(e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)})(lt),dn=((e,t,n)=>async(r,o,a)=>{const i=t(r);await Promise.all(Array.from(i.activeInputs).map((async([t,r])=>{const i=e(t),s=await i.render(t,o);n(t)||s.connect(a,r)})))})(Ft,se,Ce),hn=(e=>(t,n,r)=>e(n,t,r))(dn),pn=((e,t,n,r,o,a,i,s,c,l,u)=>(c,d)=>{const h=c.createBufferSource();return Ke(h,d),tt(h,d,"playbackRate"),Je(h,d,"buffer"),Je(h,d,"loop"),Je(h,d,"loopEnd"),Je(h,d,"loopStart"),t(n,(()=>n(c)))||(e=>{e.start=(t=>{let n=!1;return(r=0,o=0,a)=>{if(n)throw Ye();t.call(e,r,o,a),n=!0}})(e.start)})(h),t(r,(()=>r(c)))||(e=>{var t;e.start=(t=e.start,(n=0,r=0,o)=>{const a=e.buffer,i=null===a?r:Math.min(a.duration,r);null!==a&&i>a.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,i,o)})})(h),t(o,(()=>o(c)))||l(h,c),t(a,(()=>a(c)))||nt(h),t(i,(()=>i(c)))||u(h,c),t(s,(()=>s(c)))||rt(h),e(c,h),h})(un,Dt,(e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1}),(e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0}),(e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0}),Et,At,xt,0,(e=>(t,n)=>{const r=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=r),e(t,"buffer",(e=>()=>{const n=e.call(t);return n===r?null:n}),(e=>n=>e.call(t,null===n?r:n)))})(Ct),Ot),fn=((e,t)=>(n,r,o)=>(e(r).replay(o),t(r,n,o)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(se),dn),vn=((e,t,n,r,o)=>()=>{const a=new WeakMap;let i=null,s=null;return{set start(e){i=e},set stop(e){s=e},render(c,l){const u=a.get(l);return void 0!==u?Promise.resolve(u):(async(c,l)=>{let u=n(c);const d=Q(u,l);if(!d){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(l,e),null!==i&&u.start(...i),null!==s&&u.stop(s)}return a.set(l,u),d?await e(l,c.playbackRate,u.playbackRate):await r(l,c.playbackRate,u.playbackRate),await o(c,l,u),u})(c,l)}}})(hn,pn,_e,fn,Vt),mn=((e,t,n,r,o,a,i,s,c,l,u,d,h)=>(r,p,f,v=null,m=null)=>{const g=f.value,y=new x.AutomationEventList(g),w=p?(e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:r}=n;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:r}=n;t.linearRampToValueAtTime(r,e)}else if("setTarget"===n.type){const{startTime:e,target:r,timeConstant:o}=n;t.setTargetAtTime(r,e,o)}else if("setValue"===n.type){const{startTime:e,value:r}=n;t.setValueAtTime(r,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:o}=n;t.setValueCurveAtTime(o,r,e)}}}}))(y):null,_={get defaultValue(){return g},get maxValue(){return null===v?f.maxValue:v},get minValue(){return null===m?f.minValue:m},get value(){return f.value},set value(e){f.value=e,_.setValueAtTime(e,r.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof f.cancelAndHoldAtTime)null===w&&y.flush(r.context.currentTime),y.add(o(e)),f.cancelAndHoldAtTime(e);else{const t=Array.from(y).pop();null===w&&y.flush(r.context.currentTime),y.add(o(e));const n=Array.from(y).pop();f.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?f.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?f.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?f.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&f.setValueCurveAtTime(n.values,n.startTime,n.duration))}return _},cancelScheduledValues:e=>(null===w&&y.flush(r.context.currentTime),y.add(a(e)),f.cancelScheduledValues(e),_),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=r.context.currentTime;return null===w&&y.flush(n),0===Array.from(y).length&&(y.add(l(g,n)),f.setValueAtTime(g,n)),y.add(i(e,t)),f.exponentialRampToValueAtTime(e,t),_},linearRampToValueAtTime(e,t){const n=r.context.currentTime;return null===w&&y.flush(n),0===Array.from(y).length&&(y.add(l(g,n)),f.setValueAtTime(g,n)),y.add(s(e,t)),f.linearRampToValueAtTime(e,t),_},setTargetAtTime:(e,t,n)=>(null===w&&y.flush(r.context.currentTime),y.add(c(e,t,n)),f.setTargetAtTime(e,t,n),_),setValueAtTime:(e,t)=>(null===w&&y.flush(r.context.currentTime),y.add(l(e,t)),f.setValueAtTime(e,t),_),setValueCurveAtTime(e,t,n){const o=e instanceof Float32Array?e:new Float32Array(e);if(null!==d&&"webkitAudioContext"===d.name){const e=t+n,a=r.context.sampleRate,i=Math.ceil(t*a),s=Math.floor(e*a),c=s-i,l=new Float32Array(c);for(let e=0;e<c;e+=1){const r=(o.length-1)/n*((i+e)/a-t),s=Math.floor(r),c=Math.ceil(r);l[e]=s===c?o[s]:(1-(r-s))*o[s]+(1-(c-r))*o[c]}null===w&&y.flush(r.context.currentTime),y.add(u(l,t,n)),f.setValueCurveAtTime(l,t,n);const d=s/a;d<e&&h(_,l[l.length-1],d),h(_,o[o.length-1],e)}else null===w&&y.flush(r.context.currentTime),y.add(u(o,t,n)),f.setValueCurveAtTime(o,t,n);return _}};return n.set(_,f),t.set(_,r),e(_,w),_})((gn=N,(e,t)=>{gn.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),Yt,k,0,x.createCancelAndHoldAutomationEvent,x.createCancelScheduledValuesAutomationEvent,x.createExponentialRampToValueAutomationEvent,x.createLinearRampToValueAutomationEvent,x.createSetTargetAutomationEvent,x.createSetValueAutomationEvent,x.createSetValueCurveAutomationEvent,Gt,Mt);var gn;const yn=((e,t,n,r,o,a,i,s)=>class extends e{constructor(e,r){const s=a(e),c={...ae,...r},l=o(s,c),u=i(s),d=u?t():null;super(e,!1,l,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==c.buffer,this._nativeAudioBufferSourceNode=l,this._onended=null,this._playbackRate=n(this,u,l.playbackRate,re,ne)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"==typeof e?s(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(e=0,t=0,n){if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){Y(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),oe(this)&&G(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(Kt,vn,mn,Ye,pn,jt,Xt,Tt),wn=((e,t,n,r,o,a,i,s)=>class extends e{constructor(e,t){const n=a(e),r=i(n),c=o(n,t,r);super(e,!1,c,r?(e=>{const t=new WeakMap;return{render(n,r){const o=t.get(r);return void 0!==o?Promise.resolve(o):(async(n,r)=>{const o=r.destination;return t.set(r,o),await e(n,r,o),o})(n,r)}}})(s):null),this._isNodeOfNativeOfflineAudioContext=r,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Kt,0,K,Ye,((e,t)=>(n,r,o)=>{const a=n.destination;if(a.channelCount!==r)try{a.channelCount=r}catch{}o&&"explicit"!==a.channelCountMode&&(a.channelCountMode="explicit"),0===a.maxChannelCount&&Object.defineProperty(a,"maxChannelCount",{value:r});const i=e(n,{channelCount:r,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return t(i,"channelCount",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t);try{a.channelCount=t}catch(e){if(t>a.maxChannelCount)throw e}})),t(i,"channelCountMode",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t),a.channelCountMode=t})),t(i,"channelInterpretation",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t),a.channelInterpretation=t})),Object.defineProperty(i,"maxChannelCount",{get:()=>a.maxChannelCount}),i.connect(a),i})(lt,Ct),jt,Xt,Vt),_n=((e,t,n,r,o)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=Q(c,s);if(!l){const e={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=t(s,e)}return a.set(s,c),l?(await e(s,i.Q,c.Q),await e(s,i.detune,c.detune),await e(s,i.frequency,c.frequency),await e(s,i.gain,c.gain)):(await r(s,i.Q,c.Q),await r(s,i.detune,c.detune),await r(s,i.frequency,c.frequency),await r(s,i.gain,c.gain)),await o(i,s,c),c})(i,s)}}})(hn,at,_e,fn,Vt),bn=(e=>(t,n)=>e.set(t,n))(St),Cn=((e,t,n,r,o,a,i,s)=>class extends e{constructor(e,r){const c=a(e),l={...Le,...r},u=o(c,l),d=i(c);super(e,!1,u,d?n():null),this._Q=t(this,d,u.Q,re,ne),this._detune=t(this,d,u.detune,1200*Math.log2(re),-1200*Math.log2(re)),this._frequency=t(this,d,u.frequency,e.sampleRate/2,0),this._gain=t(this,d,u.gain,40*Math.log10(re),ne),this._nativeBiquadFilterNode=u,s(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(e){if(11===e.code)throw r();throw e}if(e.length!==t.length||t.length!==n.length)throw r()}})(Kt,mn,_n,Ze,at,jt,Xt,bn),Mn=((e,t)=>(n,r,o)=>{const a=new Set;return n.connect=(s=n.connect,(o,i=0,c=0)=>{const l=0===a.size;if(t(o))return s.call(n,o,i,c),e(a,[o,i,c],(e=>e[0]===o&&e[1]===i&&e[2]===c),!0),l&&r(),o;s.call(n,o,i),e(a,[o,i],(e=>e[0]===o&&e[1]===i),!0),l&&r()}),n.disconnect=(i=n.disconnect,(e,r,s)=>{const c=a.size>0;if(void 0===e)i.apply(n),a.clear();else if("number"==typeof e){i.call(n,e);for(const t of a)t[1]===e&&a.delete(t)}else{t(e)?i.call(n,e,r,s):i.call(n,e,r);for(const t of a)t[0]!==e||void 0!==r&&t[1]!==r||void 0!==s&&t[2]!==s||a.delete(t)}const l=0===a.size;c&&l&&o()}),n;var i,s})(de,Ht),En=((e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const o=n.createBufferSource();t(r,(()=>{const e=r.numberOfInputs;for(let t=0;t<e;t+=1)o.connect(r,0,t)}),(()=>o.disconnect(r)))})(Ye,Mn),An=((e,t)=>(n,r)=>{const o=n.createChannelMerger(r.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,o),Ke(o,r),o})(Gt,En),xn=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!Q(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs};i=e(a,t)}return r.set(a,i),await n(o,a,i),i})(o,a)}}})(An,_e,Vt),On=((e,t,n,r,o)=>class extends e{constructor(e,a){const i=r(e),s={...Be,...a};super(e,!1,n(i,s),o(i)?t():null)}})(Kt,xn,An,jt,Xt),Tn=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!Q(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs};i=e(a,t)}return r.set(a,i),await n(o,a,i),i})(o,a)}}})(it,_e,Vt),In=((e,t,n,r,o,a)=>class extends e{constructor(e,a){const i=r(e),s=(e=>({...e,channelCount:e.numberOfOutputs}))({...Pe,...a});super(e,!1,n(i,s),o(i)?t():null)}})(Kt,Tn,it,jt,Xt),Nn=((e,t,n,r)=>(o,{offset:a,...i})=>{const s=o.createBuffer(1,2,44100),c=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(o,{...i,gain:a}),u=s.getChannelData(0);u[0]=1,u[1]=1,c.buffer=s,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){l.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){l.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){l.channelInterpretation=e},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(e){c.onended=e},addEventListener:(...e)=>c.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>c.dispatchEvent(e[0]),removeEventListener:(...e)=>c.removeEventListener(e[0],e[1],e[2]),start(e=0){c.start.call(c,e)},stop(e=0){c.stop.call(c,e)}};return e(o,c),r(st(d,l),(()=>c.connect(l)),(()=>c.disconnect(l)))})(un,pn,lt,Mn),kn=((e,t,n,r,o)=>(a,i)=>{if(void 0===a.createConstantSource)return n(a,i);const s=a.createConstantSource();return Ke(s,i),tt(s,i,"offset"),t(r,(()=>r(a)))||nt(s),t(o,(()=>o(a)))||rt(s),e(a,s),s})(un,Dt,Nn,Et,xt),Sn=((e,t,n,r,o)=>()=>{const a=new WeakMap;let i=null,s=null;return{set start(e){i=e},set stop(e){s=e},render(c,l){const u=a.get(l);return void 0!==u?Promise.resolve(u):(async(c,l)=>{let u=n(c);const d=Q(u,l);if(!d){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(l,e),null!==i&&u.start(i),null!==s&&u.stop(s)}return a.set(l,u),d?await e(l,c.offset,u.offset):await r(l,c.offset,u.offset),await o(c,l,u),u})(c,l)}}})(hn,kn,_e,fn,Vt),Rn=((e,t,n,r,o,a,i)=>class extends e{constructor(e,i){const s=o(e),c={...Fe,...i},l=r(s,c),u=a(s),d=u?n():null;super(e,!1,l,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=l,this._offset=t(this,u,l.offset,re,ne),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(e=0){if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){Y(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),oe(this)&&G(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(Kt,mn,Sn,kn,jt,Xt,Tt),Dn=((e,t)=>(n,r)=>{const o=n.createConvolver();if(Ke(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),Je(o,r,"buffer"),r.channelCount>2)throw e();if(t(o,"channelCount",(e=>()=>e.call(o)),(t=>n=>{if(n>2)throw e();return t.call(o,n)})),"max"===r.channelCountMode)throw e();return t(o,"channelCountMode",(e=>()=>e.call(o)),(t=>n=>{if("max"===n)throw e();return t.call(o,n)})),o})(pt,Ct),Un=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!Q(i,a)){const t={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,disableNormalization:!i.normalize};i=e(a,t)}return r.set(a,i),fe(i)?await n(o,a,i.inputs[0]):await n(o,a,i),i})(o,a)}}})(Dn,_e,Vt),Ln=((e,t,n,r,o,a)=>class extends e{constructor(e,i){const s=r(e),c={...Ve,...i},l=n(s,c);super(e,!1,l,o(s)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=l,null!==c.buffer&&a(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(Kt,Un,Dn,jt,Xt,bn),Bn=((e,t,n,r,o)=>a=>{const i=new WeakMap;return{render(s,c){const l=i.get(c);return void 0!==l?Promise.resolve(l):(async(s,c)=>{let l=n(s);const u=Q(l,c);if(!u){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:a};l=t(c,e)}return i.set(c,l),u?await e(c,s.delayTime,l.delayTime):await r(c,s.delayTime,l.delayTime),await o(s,c,l),l})(s,c)}}})(hn,ct,_e,fn,Vt),Pn=((e,t,n,r,o,a,i)=>class extends e{constructor(e,s){const c=o(e),l={...je,...s},u=r(c,l),d=a(c);super(e,!1,u,d?n(l.maxDelayTime):null),this._delayTime=t(this,d,u.delayTime),i(this,l.maxDelayTime)}get delayTime(){return this._delayTime}})(Kt,mn,Bn,ct,jt,Xt,bn),Fn=(e=>(t,n)=>{const r=t.createDynamicsCompressor();if(Ke(r,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return tt(r,n,"attack"),tt(r,n,"knee"),tt(r,n,"ratio"),tt(r,n,"release"),tt(r,n,"threshold"),r})(pt),Vn=((e,t,n,r,o)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=Q(c,s);if(!l){const e={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=t(s,e)}return a.set(s,c),l?(await e(s,i.attack,c.attack),await e(s,i.knee,c.knee),await e(s,i.ratio,c.ratio),await e(s,i.release,c.release),await e(s,i.threshold,c.threshold)):(await r(s,i.attack,c.attack),await r(s,i.knee,c.knee),await r(s,i.ratio,c.ratio),await r(s,i.release,c.release),await r(s,i.threshold,c.threshold)),await o(i,s,c),c})(i,s)}}})(hn,Fn,_e,fn,Vt),Wn=((e,t,n,r,o,a,i,s)=>class extends e{constructor(e,o){const c=a(e),l={...ze,...o},u=r(c,l),d=i(c);super(e,!1,u,d?n():null),this._attack=t(this,d,u.attack),this._knee=t(this,d,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=t(this,d,u.ratio),this._release=t(this,d,u.release),this._threshold=t(this,d,u.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Kt,mn,Vn,Fn,pt,jt,Xt,bn),jn=((e,t,n,r,o)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=Q(c,s);if(!l){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=t(s,e)}return a.set(s,c),l?await e(s,i.gain,c.gain):await r(s,i.gain,c.gain),await o(i,s,c),c})(i,s)}}})(hn,lt,_e,fn,Vt),qn=((e,t,n,r,o,a)=>class extends e{constructor(e,i){const s=o(e),c={...Xe,...i},l=r(s,c),u=a(s);super(e,!1,l,u?n():null),this._gain=t(this,u,l.gain,re,ne)}get gain(){return this._gain}})(Kt,mn,jn,lt,jt,Xt),zn=((e,t,n,r)=>(o,a,{channelCount:i,channelCountMode:s,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=ot(a,o.sampleRate),h=l instanceof Float64Array?l:new Float64Array(l),p=u instanceof Float64Array?u:new Float64Array(u),f=h.length,v=p.length,m=Math.min(f,v);if(0===f||f>20)throw r();if(0===h[0])throw t();if(0===v||v>20)throw r();if(0===p[0])throw t();if(1!==h[0]){for(let e=0;e<v;e+=1)p[e]/=h[0];for(let e=1;e<f;e+=1)h[e]/=h[0]}const g=n(o,d,i,i);g.channelCount=i,g.channelCountMode=s,g.channelInterpretation=c;const y=[],w=[],_=[];for(let e=0;e<i;e+=1){y.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),w.push(e),_.push(t)}g.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,r=t.numberOfChannels;for(let e=0;e<r;e+=1){const r=t.getChannelData(e),o=n.getChannelData(e);y[e]=$e(h,f,p,v,m,w[e],_[e],y[e],32,r,o)}};const b=o.sampleRate/2,C={get bufferSize(){return d},get channelCount(){return g.channelCount},set channelCount(e){g.channelCount=e},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){g.channelCountMode=e},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(e){g.channelInterpretation=e},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener:(...e)=>g.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>g.dispatchEvent(e[0]),getFrequencyResponse(t,n,r){if(t.length!==n.length||n.length!==r.length)throw e();const o=t.length;for(let e=0;e<o;e+=1){const o=-Math.PI*(t[e]/b),a=[Math.cos(o),Math.sin(o)],i=ut(dt(p,a),dt(h,a));n[e]=Math.sqrt(i[0]*i[0]+i[1]*i[1]),r[e]=Math.atan2(i[1],i[0])}},removeEventListener:(...e)=>g.removeEventListener(e[0],e[1],e[2])};return st(C,g)})(Ze,Ye,ht,pt),Xn=((e,t,n,r)=>o=>e(Qe,(()=>Qe(o)))?Promise.resolve(e(r,r)).then((e=>{if(!e){const e=n(o,512,0,1);o.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>o.currentTime,e.connect(o.destination)}return o.startRendering()})):new Promise((e=>{const n=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(o.destination),o.startRendering()})))(Dt,lt,ht,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((e=>{n.oncomplete=()=>{r.disconnect(),e(0!==n.currentTime)},n.startRendering()}))})(lt,zt)),Yn=((e,t,n,r,o)=>(a,i)=>{const s=new WeakMap;let c=null;return{render(l,u){const d=s.get(u);return void 0!==d?Promise.resolve(d):(async(l,u)=>{let d=null,h=t(l);const p=Q(h,u);if(void 0===u.createIIRFilter?d=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(h=u.createIIRFilter(i,a)),s.set(u,null===d?h:d),null!==d){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(l.context.destination.channelCount,l.context.length,u.sampleRate);c=(async()=>(await r(l,e,e.destination),((e,t,n,r)=>{const o=n instanceof Float64Array?n:new Float64Array(n),a=r instanceof Float64Array?r:new Float64Array(r),i=o.length,s=a.length,c=Math.min(i,s);if(1!==o[0]){for(let e=0;e<i;e+=1)a[e]/=o[0];for(let e=1;e<s;e+=1)o[e]/=o[0]}const l=new Float32Array(32),u=new Float32Array(32),d=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels;for(let t=0;t<h;t+=1){const n=e.getChannelData(t),r=d.getChannelData(t);l.fill(0),u.fill(0),$e(o,i,a,s,c,l,u,0,32,n,r)}return d})(await o(e),u,a,i)))()}const e=await c;return d.buffer=e,d.start(0),d}return await r(l,u,h),h})(l,u)}}})(pn,_e,zt,Vt,Xn),Zn=(e=>(t,n,r)=>{if(void 0===t.createIIRFilter)return e(t,n,r);const o=t.createIIRFilter(r.feedforward,r.feedback);return Ke(o,r),o})(zn),Gn=((e,t,n,r,o,a)=>class extends e{constructor(e,i){const s=r(e),c=o(s),l={...Ge,...i},u=t(s,c?null:e.baseLatency,l);super(e,!1,u,c?n(l.feedback,l.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,r,o)=>{if(n.length!==r.length||r.length!==o.length)throw Ze();return t.call(e,n,r,o)})})(u),this._nativeIIRFilterNode=u,a(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(Kt,Zn,Yn,jt,Xt,bn),$n=((e,t,n,r,o,a,i,s)=>(c,l)=>{const u=l.listener,{forwardX:d,forwardY:h,forwardZ:p,positionX:f,positionY:v,positionZ:m,upX:g,upY:y,upZ:w}=void 0===u.forwardX?(()=>{const d=new Float32Array(1),h=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=i(l);let f=!1,v=[0,0,-1,0,1,0],m=[0,0,0];const g=()=>{if(f)return;f=!0;const e=r(l,256,9,0);e.onaudioprocess=({inputBuffer:e})=>{const t=[a(e,d,0),a(e,d,1),a(e,d,2),a(e,d,3),a(e,d,4),a(e,d,5)];t.some(((e,t)=>e!==v[t]))&&(u.setOrientation(...t),v=t);const n=[a(e,d,6),a(e,d,7),a(e,d,8)];n.some(((e,t)=>e!==m[t]))&&(u.setPosition(...n),m=n)},h.connect(e)},y=e=>t=>{t!==v[e]&&(v[e]=t,u.setOrientation(...v))},w=e=>t=>{t!==m[e]&&(m[e]=t,u.setPosition(...m))},_=(t,r,a)=>{const i=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});i.connect(h,0,t),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>r});const u=e({context:c},p,i.offset,re,ne);var d,f,v,m,y,w,_;return s(u,"value",(e=>()=>e.call(u)),(e=>t=>{try{e.call(u,t)}catch(e){if(9!==e.code)throw e}g(),p&&a(t)})),u.cancelAndHoldAtTime=(d=u.cancelAndHoldAtTime,p?()=>{throw o()}:(...e)=>{const t=d.apply(u,e);return g(),t}),u.cancelScheduledValues=(f=u.cancelScheduledValues,p?()=>{throw o()}:(...e)=>{const t=f.apply(u,e);return g(),t}),u.exponentialRampToValueAtTime=(v=u.exponentialRampToValueAtTime,p?()=>{throw o()}:(...e)=>{const t=v.apply(u,e);return g(),t}),u.linearRampToValueAtTime=(m=u.linearRampToValueAtTime,p?()=>{throw o()}:(...e)=>{const t=m.apply(u,e);return g(),t}),u.setTargetAtTime=(y=u.setTargetAtTime,p?()=>{throw o()}:(...e)=>{const t=y.apply(u,e);return g(),t}),u.setValueAtTime=(w=u.setValueAtTime,p?()=>{throw o()}:(...e)=>{const t=w.apply(u,e);return g(),t}),u.setValueCurveAtTime=(_=u.setValueCurveAtTime,p?()=>{throw o()}:(...e)=>{const t=_.apply(u,e);return g(),t}),u};return{forwardX:_(0,0,y(0)),forwardY:_(1,0,y(1)),forwardZ:_(2,-1,y(2)),positionX:_(6,0,w(0)),positionY:_(7,0,w(1)),positionZ:_(8,0,w(2)),upX:_(3,0,y(3)),upY:_(4,1,y(4)),upZ:_(5,0,y(5))}})():u;return{get forwardX(){return d},get forwardY(){return h},get forwardZ(){return p},get positionX(){return f},get positionY(){return v},get positionZ(){return m},get upX(){return g},get upY(){return y},get upZ(){return w}}})(mn,An,kn,ht,pt,_t,Xt,Ct),Hn=new WeakMap,Qn=((e,t,n,r,o,a)=>class extends n{constructor(n,a){super(n),this._nativeContext=n,S.set(this,n),r(n)&&o.set(n,new Set),this._destination=new e(this,a),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"==typeof e?a(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(wn,$n,Zt,Xt,Hn,Tt),Jn=((e,t,n,r,o,a)=>(i,s)=>{const c=i.createOscillator();return Ke(c,s),tt(c,s,"detune"),tt(c,s,"frequency"),void 0!==s.periodicWave?c.setPeriodicWave(s.periodicWave):Je(c,s,"type"),t(n,(()=>n(i)))||nt(c),t(r,(()=>r(i)))||a(c,i),t(o,(()=>o(i)))||rt(c),e(i,c),c})(un,Dt,Et,At,xt,Ot),Kn=((e,t,n,r,o)=>()=>{const a=new WeakMap;let i=null,s=null,c=null;return{set periodicWave(e){i=e},set start(e){s=e},set stop(e){c=e},render(l,u){const d=a.get(u);return void 0!==d?Promise.resolve(d):(async(l,u)=>{let d=n(l);const h=Q(d,u);if(!h){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===i?void 0:i,type:d.type};d=t(u,e),null!==s&&d.start(s),null!==c&&d.stop(c)}return a.set(u,d),h?(await e(u,l.detune,d.detune),await e(u,l.frequency,d.frequency)):(await r(u,l.detune,d.detune),await r(u,l.frequency,d.frequency)),await o(l,u,d),d})(l,u)}}})(hn,Jn,_e,fn,Vt),er=((e,t,n,r,o,a,i)=>class extends e{constructor(e,i){const s=o(e),c={...ft,...i},l=n(s,c),u=a(s),d=u?r():null,h=e.sampleRate/2;super(e,!1,l,d),this._detune=t(this,u,l.detune,153600,-153600),this._frequency=t(this,u,l.frequency,h,-h),this._nativeOscillatorNode=l,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(e=0){if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){Y(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),oe(this)&&G(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(Kt,mn,Jn,Kn,jt,Xt,Tt),tr=(e=>(t,n)=>{const r=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}})(pn),nr=((e,t,n,r,o)=>(a,{curve:i,oversample:s,...c})=>{const l=a.createWaveShaper(),u=a.createWaveShaper();Ke(l,c),Ke(u,c);const d=n(a,{...c,gain:1}),h=n(a,{...c,gain:-1}),p=n(a,{...c,gain:1}),f=n(a,{...c,gain:-1});let v=null,m=!1,g=null;const y={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){d.channelCount=e,h.channelCount=e,l.channelCount=e,p.channelCount=e,u.channelCount=e,f.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){d.channelCountMode=e,h.channelCountMode=e,l.channelCountMode=e,p.channelCountMode=e,u.channelCountMode=e,f.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e,h.channelInterpretation=e,l.channelInterpretation=e,p.channelInterpretation=e,u.channelInterpretation=e,f.channelInterpretation=e},get context(){return l.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)l.curve=n,u.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),r=new Float32Array(e+2-e%2);t[0]=n[0],r[0]=-n[e-1];const o=Math.ceil((e+1)/2),a=(e+1)/2-1;for(let i=1;i<o;i+=1){const s=i/o*a,c=Math.floor(s),l=Math.ceil(s);t[i]=c===l?n[c]:(1-(s-c))*n[c]+(1-(l-s))*n[l],r[i]=c===l?-n[e-1-c]:-(1-(s-c))*n[e-1-c]-(1-(l-s))*n[e-1-l]}t[o]=e%2==1?n[o-1]:(n[o-2]+n[o-1])/2,l.curve=t,u.curve=r}g=n,m&&(r(g)&&null===v?v=e(a,d):null!==v&&(v(),v=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(e){l.oversample=e,u.oversample=e},addEventListener:(...e)=>d.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>d.dispatchEvent(e[0]),removeEventListener:(...e)=>d.removeEventListener(e[0],e[1],e[2])};return null!==i&&(y.curve=i instanceof Float32Array?i:new Float32Array(i)),s!==y.oversample&&(y.oversample=s),o(st(y,p),(()=>{d.connect(l).connect(p),d.connect(h).connect(u).connect(f).connect(p),m=!0,r(g)&&(v=e(a,d))}),(()=>{d.disconnect(l),l.disconnect(p),d.disconnect(h),h.disconnect(u),u.disconnect(f),f.disconnect(p),m=!1,null!==v&&(v(),v=null)}))})(tr,Ye,lt,bt,Mn),rr=((e,t,n,r,o,a,i)=>(s,c)=>{const l=s.createWaveShaper();if(null!==a&&"webkitAudioContext"===a.name&&void 0===s.createGain().gain.automationRate)return n(s,c);Ke(l,c);const u=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==u&&u.length<2)throw t();Je(l,{curve:u},"curve"),Je(l,c,"oversample");let d=null,h=!1;return i(l,"curve",(e=>()=>e.call(l)),(t=>n=>(t.call(l,n),h&&(r(n)&&null===d?d=e(s,l):r(n)||null===d||(d(),d=null)),n))),o(l,(()=>{h=!0,r(l.curve)&&(d=e(s,l))}),(()=>{h=!1,null!==d&&(d(),d=null)}))})(tr,Ye,nr,bt,Mn,Gt,Ct),or=((e,t,n,r,o,a,i,s,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:p,distanceModel:f,maxDistance:v,orientationX:m,orientationY:g,orientationZ:y,panningModel:w,positionX:_,positionY:b,positionZ:C,refDistance:M,rolloffFactor:E,...A})=>{const x=u.createPanner();if(A.channelCount>2)throw i();if("max"===A.channelCountMode)throw i();Ke(x,A);const O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},T=n(u,{...O,channelInterpretation:"speakers",numberOfInputs:6}),I=r(u,{...A,gain:1}),N=r(u,{...O,gain:1}),k=r(u,{...O,gain:0}),S=r(u,{...O,gain:0}),R=r(u,{...O,gain:0}),D=r(u,{...O,gain:0}),U=r(u,{...O,gain:0}),L=o(u,256,6,1),B=a(u,{...O,curve:new Float32Array([1,1]),oversample:"none"});let P=[m,g,y],F=[_,b,C];const V=new Float32Array(1);L.onaudioprocess=({inputBuffer:e})=>{const t=[c(e,V,0),c(e,V,1),c(e,V,2)];t.some(((e,t)=>e!==P[t]))&&(x.setOrientation(...t),P=t);const n=[c(e,V,3),c(e,V,4),c(e,V,5)];n.some(((e,t)=>e!==F[t]))&&(x.setPosition(...n),F=n)},Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(S.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0});const W={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(e){if(e>2)throw i();I.channelCount=e,x.channelCount=e},get channelCountMode(){return x.channelCountMode},set channelCountMode(e){if("max"===e)throw i();I.channelCountMode=e,x.channelCountMode=e},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(e){I.channelInterpretation=e,x.channelInterpretation=e},get coneInnerAngle(){return x.coneInnerAngle},set coneInnerAngle(e){x.coneInnerAngle=e},get coneOuterAngle(){return x.coneOuterAngle},set coneOuterAngle(e){x.coneOuterAngle=e},get coneOuterGain(){return x.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();x.coneOuterGain=e},get context(){return x.context},get distanceModel(){return x.distanceModel},set distanceModel(e){x.distanceModel=e},get inputs(){return[I]},get maxDistance(){return x.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;x.maxDistance=e},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get orientationX(){return N.gain},get orientationY(){return k.gain},get orientationZ(){return S.gain},get panningModel(){return x.panningModel},set panningModel(e){x.panningModel=e},get positionX(){return R.gain},get positionY(){return D.gain},get positionZ(){return U.gain},get refDistance(){return x.refDistance},set refDistance(e){if(e<0)throw new RangeError;x.refDistance=e},get rolloffFactor(){return x.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;x.rolloffFactor=e},addEventListener:(...e)=>I.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>I.dispatchEvent(e[0]),removeEventListener:(...e)=>I.removeEventListener(e[0],e[1],e[2])};return d!==W.coneInnerAngle&&(W.coneInnerAngle=d),h!==W.coneOuterAngle&&(W.coneOuterAngle=h),p!==W.coneOuterGain&&(W.coneOuterGain=p),f!==W.distanceModel&&(W.distanceModel=f),v!==W.maxDistance&&(W.maxDistance=v),m!==W.orientationX.value&&(W.orientationX.value=m),g!==W.orientationY.value&&(W.orientationY.value=g),y!==W.orientationZ.value&&(W.orientationZ.value=y),w!==W.panningModel&&(W.panningModel=w),_!==W.positionX.value&&(W.positionX.value=_),b!==W.positionY.value&&(W.positionY.value=b),C!==W.positionZ.value&&(W.positionZ.value=C),M!==W.refDistance&&(W.refDistance=M),E!==W.rolloffFactor&&(W.rolloffFactor=E),1===P[0]&&0===P[1]&&0===P[2]||x.setOrientation(...P),0===F[0]&&0===F[1]&&0===F[2]||x.setPosition(...F),l(st(W,x),(()=>{I.connect(x),e(I,B,0,0),B.connect(N).connect(T,0,0),B.connect(k).connect(T,0,1),B.connect(S).connect(T,0,2),B.connect(R).connect(T,0,3),B.connect(D).connect(T,0,4),B.connect(U).connect(T,0,5),T.connect(L).connect(u.destination)}),(()=>{I.disconnect(x),s(I,B,0,0),B.disconnect(N),N.disconnect(T),B.disconnect(k),k.disconnect(T),B.disconnect(S),S.disconnect(T),B.disconnect(R),R.disconnect(T),B.disconnect(D),D.disconnect(T),B.disconnect(U),U.disconnect(T),T.disconnect(L),L.disconnect(u.destination)}))})(ve,Ye,An,lt,ht,rr,pt,we,_t,Mn),ar=(e=>(t,n)=>{const r=t.createPanner();return void 0===r.orientationX?e(t,n):(Ke(r,n),tt(r,n,"orientationX"),tt(r,n,"orientationY"),tt(r,n,"orientationZ"),tt(r,n,"positionX"),tt(r,n,"positionY"),tt(r,n,"positionZ"),Je(r,n,"coneInnerAngle"),Je(r,n,"coneOuterAngle"),Je(r,n,"coneOuterGain"),Je(r,n,"distanceModel"),Je(r,n,"maxDistance"),Je(r,n,"panningModel"),Je(r,n,"refDistance"),Je(r,n,"rolloffFactor"),r)})(or),ir=((e,t,n,r,o,a,i,s,c,l)=>()=>{const u=new WeakMap;let d=null;return{render(h,p){const f=u.get(p);return void 0!==f?Promise.resolve(f):(async(h,p)=>{let f=null,v=a(h);const m={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},g={...m,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},y=Q(v,p);if("bufferSize"in v)f=r(p,{...m,gain:1});else if(!y){const e={...g,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=o(p,e)}if(u.set(p,null===f?v:f),null!==f){if(null===d){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new i(6,h.context.length,p.sampleRate),r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});r.connect(e.destination),d=(async()=>{const t=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map((async(t,r)=>{const o=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0});return await s(e,t,o.offset),o})));for(let e=0;e<6;e+=1)t[e].connect(r,0,e),t[e].start(0);return l(e)})()}const e=await d,a=r(p,{...m,gain:1});await c(h,p,a);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let v=[u[0][0],u[1][0],u[2][0]],y=[u[3][0],u[4][0],u[5][0]],w=r(p,{...m,gain:1}),_=o(p,{...g,orientationX:v[0],orientationY:v[1],orientationZ:v[2],positionX:y[0],positionY:y[1],positionZ:y[2]});a.connect(w).connect(_.inputs[0]),_.connect(f);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],n=[u[3][t],u[4][t],u[5][t]];if(e.some(((e,t)=>e!==v[t]))||n.some(((e,t)=>e!==y[t]))){v=e,y=n;const i=t/p.sampleRate;w.gain.setValueAtTime(0,i),w=r(p,{...m,gain:0}),_=o(p,{...g,orientationX:v[0],orientationY:v[1],orientationZ:v[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),w.gain.setValueAtTime(1,i),a.connect(w).connect(_.inputs[0]),_.connect(f)}}return f}return y?(await e(p,h.orientationX,v.orientationX),await e(p,h.orientationY,v.orientationY),await e(p,h.orientationZ,v.orientationZ),await e(p,h.positionX,v.positionX),await e(p,h.positionY,v.positionY),await e(p,h.positionZ,v.positionZ)):(await s(p,h.orientationX,v.orientationX),await s(p,h.orientationY,v.orientationY),await s(p,h.orientationZ,v.orientationZ),await s(p,h.positionX,v.positionX),await s(p,h.positionY,v.positionY),await s(p,h.positionZ,v.positionZ)),fe(v)?await c(h,p,v.inputs[0]):await c(h,p,v),v})(h,p)}}})(hn,An,kn,lt,ar,_e,zt,fn,Vt,Xn),sr=((e,t,n,r,o,a,i)=>class extends e{constructor(e,s){const c=o(e),l={...vt,...s},u=n(c,l),d=a(c);super(e,!1,u,d?r():null),this._nativePannerNode=u,this._orientationX=t(this,d,u.orientationX,re,ne),this._orientationY=t(this,d,u.orientationY,re,ne),this._orientationZ=t(this,d,u.orientationZ,re,ne),this._positionX=t(this,d,u.positionX,re,ne),this._positionY=t(this,d,u.positionY,re,ne),this._positionZ=t(this,d,u.positionZ,re,ne),i(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(Kt,mn,ar,ir,jt,Xt,bn),cr=(e=>(t,{disableNormalization:n,imag:r,real:o})=>{const a=r instanceof Float32Array?r:new Float32Array(r),i=o instanceof Float32Array?o:new Float32Array(o),s=t.createPeriodicWave(i,a,{disableNormalization:n});if(Array.from(r).length<2)throw e();return s})(K),lr=((e,t,n,r)=>class r{constructor(r,o){const a=t(r),i=(e=>{const{imag:t,real:n}=e;return void 0===t?void 0===n?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...e,imag:t,real:Array.from(t,(()=>0))}:{...e,imag:t,real:n}})({...mt,...o}),s=e(a,i);return n.add(s),s}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===r.prototype||n.has(e)}})(cr,jt,new WeakSet),ur=((e,t,n,r,o,a)=>{const i=16385,s=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},d=(e,a,d,h,p)=>{if(1===a)return((e,t,o,a)=>{const d=new Float32Array(i),h=new Float32Array(i);for(let e=0;e<i;e+=1){const t=e/16384*c;d[e]=Math.cos(t),h[e]=Math.sin(t)}const p=n(e,{...l,gain:0}),f=r(e,{...u,curve:d}),v=r(e,{...u,curve:s}),m=n(e,{...l,gain:0}),g=r(e,{...u,curve:h});return{connectGraph(){t.connect(p),t.connect(void 0===v.inputs?v:v.inputs[0]),t.connect(m),v.connect(o),o.connect(void 0===f.inputs?f:f.inputs[0]),o.connect(void 0===g.inputs?g:g.inputs[0]),f.connect(p.gain),g.connect(m.gain),p.connect(a,0,0),m.connect(a,0,1)},disconnectGraph(){t.disconnect(p),t.disconnect(void 0===v.inputs?v:v.inputs[0]),t.disconnect(m),v.disconnect(o),o.disconnect(void 0===f.inputs?f:f.inputs[0]),o.disconnect(void 0===g.inputs?g:g.inputs[0]),f.disconnect(p.gain),g.disconnect(m.gain),p.disconnect(a,0,0),m.disconnect(a,0,1)}}})(e,d,h,p);if(2===a)return((e,o,a,d)=>{const h=new Float32Array(i),p=new Float32Array(i),f=new Float32Array(i),v=new Float32Array(i),m=Math.floor(8192.5);for(let e=0;e<i;e+=1)if(e>m){const t=(e-m)/(16384-m)*c;h[e]=Math.cos(t),p[e]=Math.sin(t),f[e]=0,v[e]=1}else{const t=e/(16384-m)*c;h[e]=1,p[e]=0,f[e]=Math.cos(t),v[e]=Math.sin(t)}const g=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(e,{...l,gain:0}),w=r(e,{...u,curve:h}),_=n(e,{...l,gain:0}),b=r(e,{...u,curve:p}),C=r(e,{...u,curve:s}),M=n(e,{...l,gain:0}),E=r(e,{...u,curve:f}),A=n(e,{...l,gain:0}),x=r(e,{...u,curve:v});return{connectGraph(){o.connect(g),o.connect(void 0===C.inputs?C:C.inputs[0]),g.connect(y,0),g.connect(_,0),g.connect(M,1),g.connect(A,1),C.connect(a),a.connect(void 0===w.inputs?w:w.inputs[0]),a.connect(void 0===b.inputs?b:b.inputs[0]),a.connect(void 0===E.inputs?E:E.inputs[0]),a.connect(void 0===x.inputs?x:x.inputs[0]),w.connect(y.gain),b.connect(_.gain),E.connect(M.gain),x.connect(A.gain),y.connect(d,0,0),M.connect(d,0,0),_.connect(d,0,1),A.connect(d,0,1)},disconnectGraph(){o.disconnect(g),o.disconnect(void 0===C.inputs?C:C.inputs[0]),g.disconnect(y,0),g.disconnect(_,0),g.disconnect(M,1),g.disconnect(A,1),C.disconnect(a),a.disconnect(void 0===w.inputs?w:w.inputs[0]),a.disconnect(void 0===b.inputs?b:b.inputs[0]),a.disconnect(void 0===E.inputs?E:E.inputs[0]),a.disconnect(void 0===x.inputs?x:x.inputs[0]),w.disconnect(y.gain),b.disconnect(_.gain),E.disconnect(M.gain),x.disconnect(A.gain),y.disconnect(d,0,0),M.disconnect(d,0,0),_.disconnect(d,0,1),A.disconnect(d,0,1)}}})(e,d,h,p);throw o()};return(t,{channelCount:r,channelCountMode:i,pan:s,...c})=>{if("max"===i)throw o();const l=e(t,{...c,channelCount:1,channelCountMode:i,numberOfInputs:2}),u=n(t,{...c,channelCount:r,channelCountMode:i,gain:1}),h=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:p,disconnectGraph:f}=d(t,r,u,h,l);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});const v={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){u.channelCount!==e&&(m&&f(),({connectGraph:p,disconnectGraph:f}=d(t,e,u,h,l)),m&&p()),u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw o();u.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){u.channelInterpretation=e},get context(){return u.context},get inputs(){return[u]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get pan(){return h.gain},addEventListener:(...e)=>u.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>u.dispatchEvent(e[0]),removeEventListener:(...e)=>u.removeEventListener(e[0],e[1],e[2])};let m=!1;return a(st(v,l),(()=>{p(),m=!0}),(()=>{f(),m=!1}))}})(An,it,lt,rr,pt,Mn),dr=((e,t)=>(n,r)=>{const o=r.channelCountMode;if("clamped-max"===o)throw t();if(void 0===n.createStereoPanner)return e(n,r);const a=n.createStereoPanner();return Ke(a,r),tt(a,r,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>o,set:e=>{if(e!==o)throw t()}}),a})(ur,pt),hr=((e,t,n,r,o)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=Q(c,s);if(!l){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=t(s,e)}return a.set(s,c),l?await e(s,i.pan,c.pan):await r(s,i.pan,c.pan),fe(c)?await o(i,s,c.inputs[0]):await o(i,s,c),c})(i,s)}}})(hn,dr,_e,fn,Vt),pr=((e,t,n,r,o,a)=>class extends e{constructor(e,i){const s=o(e),c={...gt,...i},l=n(s,c),u=a(s);super(e,!1,l,u?r():null),this._pan=t(this,u,l.pan)}get pan(){return this._pan}})(Kt,mn,dr,hr,jt,Xt),fr=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!Q(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,curve:i.curve,oversample:i.oversample};i=e(a,t)}return r.set(a,i),fe(i)?await n(o,a,i.inputs[0]):await n(o,a,i),i})(o,a)}}})(rr,_e,Vt),vr=((e,t,n,r,o,a,i)=>class extends e{constructor(e,t){const s=o(e),c={...wt,...t},l=n(s,c);super(e,!0,l,a(s)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,i(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(Kt,Ye,rr,fr,jt,Xt,bn),mr=(e=>null!==e&&e.isSecureContext)(Bt),gr=(e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return r()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(Bt),yr=new WeakMap,wr=((e,t)=>n=>{let r=e.get(n);if(void 0!==r)return r;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r})(yr,zt),_r=mr?((e,t,n,r,o,a,i,s,c,l,u,d,h)=>{let p=0;return(f,v,m={credentials:"omit"})=>{const g=u.get(f);if(void 0!==g&&g.has(v))return Promise.resolve();const y=l.get(f);if(void 0!==y){const e=y.get(v);if(void 0!==e)return e}const w=a(f),_=void 0===w.audioWorklet?o(v).then((([e,t])=>{const[r,o]=F(e,t);return n(`${r};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${o}\n})})(window,'_AWGS')`)})).then((()=>{const e=h._AWGS.pop();if(void 0===e)throw new SyntaxError;r(w.currentTime,w.sampleRate,(()=>e(class{},void 0,((e,n)=>{if(""===e.trim())throw t();const r=U.get(w);if(void 0!==r){if(r.has(e))throw t();W(n),V(n.parameterDescriptors),r.set(e,n)}else W(n),V(n.parameterDescriptors),U.set(w,new Map([[e,n]]))}),w.sampleRate,void 0,void 0)))})):Promise.all([o(v),Promise.resolve(e(d,d))]).then((([[e,t],n])=>{const r=p+1;p=r;const[o,a]=F(e,t),l=new Blob([`${o};((AudioWorkletProcessor,registerProcessor)=>{${a}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${r}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(l);return w.audioWorklet.addModule(u,m).then((()=>{if(s(w))return w;const e=i(w);return e.audioWorklet.addModule(u,m).then((()=>e))})).then((e=>{if(null===c)throw new SyntaxError;try{new c(e,`__sac${r}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(u)))}));return void 0===y?l.set(f,new Map([[v,_]])):y.set(v,_),_.then((()=>{const e=u.get(f);void 0===e?u.set(f,new Set([v])):e.add(v)})).finally((()=>{const e=l.get(f);void 0!==e&&e.delete(v)})),_}})(Dt,pt,(e=>t=>new Promise(((n,r)=>{if(null===e)return void r(new SyntaxError);const o=e.document.head;if(null===o)r(new SyntaxError);else{const a=e.document.createElement("script"),i=new Blob([t],{type:"application/javascript"}),s=URL.createObjectURL(i),c=e.onerror,l=()=>{e.onerror=c,URL.revokeObjectURL(s)};e.onerror=(t,n,o,a,i)=>n===s||n===e.location.href&&1===o&&1===a?(l(),r(i),!1):null!==c?c(t,n,o,a,i):void 0,a.onerror=()=>{l(),r(new SyntaxError)},a.onload=()=>{l(),n()},a.src=s,a.type="module",o.appendChild(a)}})))(Bt),gr,(async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw new DOMException("","AbortError")}),jt,wr,Xt,Jt,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),o=URL.createObjectURL(n);let a=!1,i=!1;try{await r.audioWorklet.addModule(o);const t=new e(r,"a",{numberOfOutputs:0}),n=r.createOscillator();t.port.onmessage=()=>a=!0,t.onprocessorerror=()=>i=!0,n.connect(t),n.start(0),await r.startRendering(),await new Promise((e=>setTimeout(e)))}catch{}finally{URL.revokeObjectURL(o)}return a&&!i})(Jt,zt),Bt):void 0,br=((e,t)=>n=>e(n)||t(n))($t,Xt),Cr=((e,t,n,r,o,a,i,s,c,l,u)=>(n,r)=>{const d=i(n)?n:a(n);if(o.has(r)){const e=new DOMException("","DataCloneError");return Promise.reject(e)}try{o.add(r)}catch{}return t(c,(()=>c(d)))?d.decodeAudioData(r).then((n=>(We(r).catch((()=>{})),t(s,(()=>s(n)))||u(n),e.add(n),n))):new Promise(((t,n)=>{const o=async()=>{try{await We(r)}catch{}},a=e=>{n(e),o()};try{d.decodeAudioData(r,(n=>{"function"!=typeof n.copyFromChannel&&(l(n),ee(n)),e.add(n),o().then((()=>t(n)))}),(e=>{a(null===e?new DOMException("","EncodingError"):e)}))}catch(e){a(e)}}))})(nn,Dt,0,0,new WeakSet,jt,br,J,Qe,sn,cn),Mr=(((e,t,n,r,o,a,i,s,c,l,u,d,h,p,f,v,m,g,y,w)=>{})(_r,tn,ln,yn,Cn,On,In,Rn,Ln,Cr,Pn,Wn,qn,Gn,Qn,er,sr,lr,pr,vr),((e,t,n,r)=>{})(Kt,0,jt,Xt),((e,t,n,r)=>{})(Kt,0,jt,Xt),((e,t,n,r)=>class extends e{constructor(e,t){const o=n(e),a=((e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort(((e,t)=>e.id<t.id?-1:e.id>t.id?1:0));const r=n.slice(0,1),o=e.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:t}),o})(o,t);if(r(o))throw new TypeError;super(e,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Kt,0,jt,Xt)),Er=((e,t)=>(n,{mediaStreamTrack:r})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(r);const o=new MediaStream([r]),a=n.createMediaStreamSource(o);if("audio"!==r.kind)throw e();if(t(n))throw new TypeError;return a})(Ye,Xt),Ar=(((e,t,n)=>{})(Kt,Er,jt),(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Hn)),xr=(e=>(t,n)=>{e(t).add(n)})(Ar),Or=(e=>(t,n,r=0,o=0)=>{const a=t[r];if(void 0===a)throw e();return xe(n)?a.connect(n,0,o):a.connect(n,0)})(K),Tr=(e=>(t,n)=>{e(t).delete(n)})(Ar),Ir=(e=>(t,n=void 0,r=void 0,o=0)=>void 0===n?t.forEach((e=>e.disconnect())):"number"==typeof n?qe(e,t,n).disconnect():xe(n)?void 0===r?t.forEach((e=>e.disconnect(n))):void 0===o?qe(e,t,r).disconnect(n,0):qe(e,t,r).disconnect(n,0,o):void 0===r?t.forEach((e=>e.disconnect(n))):qe(e,t,r).disconnect(n,0))(K),Nr=new WeakMap,kr=((e,t)=>n=>t(e,n))(Nr,j),Sr=((e,t,n,r,o,a,i,s,c,l,u,d,h)=>(p,f,v,m)=>{if(0===m.numberOfInputs&&0===m.numberOfOutputs)throw c();const g=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(g.some((e=>e<1)))throw c();if(g.length!==m.numberOfOutputs)throw t();if("explicit"!==m.channelCountMode)throw c();const y=m.channelCount*m.numberOfInputs,w=g.reduce(((e,t)=>e+t),0),_=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length;if(y+_>6||w>6)throw c();const b=new MessageChannel,C=[],M=[];for(let e=0;e<m.numberOfInputs;e+=1)C.push(i(p,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),M.push(o(p,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const E=[];if(void 0!==v.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:r}of v.parameterDescriptors){const o=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==m.parameterData[r]?m.parameterData[r]:void 0===e?0:e});Object.defineProperties(o.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?re:t},minValue:{get:()=>void 0===n?ne:n}}),E.push(o)}const A=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+_)}),x=ot(f,p.sampleRate),O=s(p,x,y+_,Math.max(1,w)),T=o(p,{channelCount:Math.max(1,w),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,w)}),I=[];for(let e=0;e<m.numberOfOutputs;e+=1)I.push(r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[e]}));for(let e=0;e<m.numberOfInputs;e+=1){C[e].connect(M[e]);for(let t=0;t<m.channelCount;t+=1)M[e].connect(A,t,e*m.channelCount+t)}const N=new Ne(void 0===v.parameterDescriptors?[]:v.parameterDescriptors.map((({name:e},t)=>{const n=E[t];return n.connect(A,0,y+t),n.start(0),[e,n.offset]})));A.connect(O);let k=m.channelInterpretation,S=null;const R=0===m.numberOfOutputs?[O]:I,D={get bufferSize(){return x},get channelCount(){return m.channelCount},set channelCount(e){throw n()},get channelCountMode(){return m.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return k},set channelInterpretation(e){for(const t of C)t.channelInterpretation=e;k=e},get context(){return O.context},get inputs(){return C},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get onprocessorerror(){return S},set onprocessorerror(e){"function"==typeof S&&D.removeEventListener("processorerror",S),S="function"==typeof e?e:null,"function"==typeof S&&D.addEventListener("processorerror",S)},get parameters(){return N},get port(){return b.port2},addEventListener:(...e)=>O.addEventListener(e[0],e[1],e[2]),connect:e.bind(null,R),disconnect:l.bind(null,R),dispatchEvent:(...e)=>O.dispatchEvent(e[0]),removeEventListener:(...e)=>O.removeEventListener(e[0],e[1],e[2])},U=new Map;var B,P;b.port1.addEventListener=(B=b.port1.addEventListener,(...e)=>{if("message"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=U.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{u(p.currentTime,p.sampleRate,(()=>t(e)))},U.set(t,e[1]))}}return B.call(b.port1,e[0],e[1],e[2])}),b.port1.removeEventListener=(P=b.port1.removeEventListener,(...e)=>{if("message"===e[0]){const t=U.get(e[1]);void 0!==t&&(U.delete(e[1]),e[1]=t)}return P.call(b.port1,e[0],e[1],e[2])});let F=null;Object.defineProperty(b.port1,"onmessage",{get:()=>F,set:e=>{"function"==typeof F&&b.port1.removeEventListener("message",F),F="function"==typeof e?e:null,"function"==typeof F&&(b.port1.addEventListener("message",F),b.port1.start())}}),v.prototype.port=b.port1;let V=null;const W=((e,t,n,r)=>{let o=L.get(e);void 0===o&&(o=new WeakMap,L.set(e,o));const a=(async(e,t)=>{const n=await(e=>new Promise(((t,n)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:e})=>{r.close(),o.close(),t(e)},r.onmessageerror=({data:e})=>{r.close(),o.close(),n(e)},o.postMessage(e)})))(t);return new e(n)})(n,r);return o.set(t,a),a})(p,D,v,m);W.then((e=>V=e));const j=De(m.numberOfInputs,m.channelCount),q=De(m.numberOfOutputs,g),z=void 0===v.parameterDescriptors?[]:v.parameterDescriptors.reduce(((e,{name:t})=>({...e,[t]:new Float32Array(128)})),{});let X=!0;const Y=()=>{m.numberOfOutputs>0&&O.disconnect(T);for(let e=0,t=0;e<m.numberOfOutputs;e+=1){const n=I[e];for(let r=0;r<g[e];r+=1)T.disconnect(n,t+r,r);t+=g[e]}},Z=new Map;O.onaudioprocess=({inputBuffer:e,outputBuffer:t})=>{if(null!==V){const n=d(D);for(let r=0;r<x;r+=128){for(let t=0;t<m.numberOfInputs;t+=1)for(let n=0;n<m.channelCount;n+=1)Se(e,j[t],n,n,r);void 0!==v.parameterDescriptors&&v.parameterDescriptors.forEach((({name:t},n)=>{Se(e,z,t,y+n,r)}));for(let e=0;e<m.numberOfInputs;e+=1)for(let t=0;t<g[e];t+=1)0===q[e][t].byteLength&&(q[e][t]=new Float32Array(128));try{const e=j.map(((e,t)=>{if(n[t].size>0)return Z.set(t,x/128),e;const r=Z.get(t);return void 0===r?[]:(e.every((e=>e.every((e=>0===e))))&&(1===r?Z.delete(t):Z.set(t,r-1)),e)})),o=u(p.currentTime+r/p.sampleRate,p.sampleRate,(()=>V.process(e,q,z)));X=o;for(let e=0,n=0;e<m.numberOfOutputs;e+=1){for(let o=0;o<g[e];o+=1)Re(t,q[e],o,n+o,r);n+=g[e]}}catch(e){X=!1,D.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}))}if(!X){for(let e=0;e<m.numberOfInputs;e+=1){C[e].disconnect(M[e]);for(let t=0;t<m.channelCount;t+=1)M[r].disconnect(A,t,e*m.channelCount+t)}if(void 0!==v.parameterDescriptors){const e=v.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=E[t];e.disconnect(A,0,y+t),e.stop()}}A.disconnect(O),O.onaudioprocess=null,G?Y():Q();break}}}};let G=!1;const $=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),H=()=>O.connect($).connect(p.destination),Q=()=>{O.disconnect($),$.disconnect()};return H(),h(D,(()=>{if(X){Q(),m.numberOfOutputs>0&&O.connect(T);for(let e=0,t=0;e<m.numberOfOutputs;e+=1){const n=I[e];for(let r=0;r<g[e];r+=1)T.connect(n,t+r,r);t+=g[e]}}G=!0}),(()=>{X&&(H(),Y()),G=!1}))})(Or,K,Ye,An,it,kn,lt,ht,pt,Ir,gr,kr,Mn),Rr=((e,t,n,r,o)=>(a,i,s,c,l,u)=>{if(null!==s)try{const t=new s(a,c,u),r=new Map;let i=null;if(Object.defineProperties(t,{channelCount:{get:()=>u.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>i,set:e=>{"function"==typeof i&&t.removeEventListener("processorerror",i),i="function"==typeof e?e:null,"function"==typeof i&&t.addEventListener("processorerror",i)}}}),t.addEventListener=(h=t.addEventListener,(...e)=>{if("processorerror"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=r.get(e[1]);void 0!==n?e[1]=n:(e[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),t(n)):t(new ErrorEvent(e[0],{...n}))},r.set(t,e[1]))}}return h.call(t,"error",e[1],e[2]),h.call(t,...e)}),t.removeEventListener=(d=t.removeEventListener,(...e)=>{if("processorerror"===e[0]){const t=r.get(e[1]);void 0!==t&&(r.delete(e[1]),e[1]=t)}return d.call(t,"error",e[1],e[2]),d.call(t,e[0],e[1],e[2])}),0!==u.numberOfOutputs){const e=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return t.connect(e).connect(a.destination),o(t,(()=>e.disconnect()),(()=>e.connect(a.destination)))}return t}catch(e){if(11===e.code)throw r();throw e}var d,h;if(void 0===l)throw r();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(u),t(a,i,l,u)})(Ye,Sr,lt,pt,Mn),Dr=((e,t,n,r,o,a,i,s,c,l,u,d,h,p,f,v)=>(m,g,y)=>{const w=new WeakMap;let _=null;return{render(b,C){s(C,b);const M=w.get(C);return void 0!==M?Promise.resolve(M):(async(s,b)=>{let C=u(s),M=null;const E=Q(C,b),A=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===d){const e=A.reduce(((e,t)=>e+t),0),n=o(b,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),a=[];for(let e=0;e<s.numberOfOutputs;e+=1)a.push(r(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[e]}));const l=i(b,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});l.connect=t.bind(null,a),l.disconnect=c.bind(null,a),M=[n,a,l]}else E||(C=new d(b,m));if(w.set(b,null===M?C:M[2]),null!==M){if(null===_){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===h)throw new Error("Missing the native OfflineAudioContext constructor.");const e=s.channelCount*s.numberOfInputs,t=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=e+t,c=async()=>{const c=new h(n,128*Math.ceil(s.context.length/128),b.sampleRate),l=[],u=[];for(let e=0;e<g.numberOfInputs;e+=1)l.push(i(c,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),u.push(o(c,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const d=await Promise.all(Array.from(s.parameters.values()).map((async e=>{const t=a(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await p(c,e,t.offset),t}))),m=r(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<g.numberOfInputs;e+=1){l[e].connect(u[e]);for(let t=0;t<g.channelCount;t+=1)u[e].connect(m,t,e*g.channelCount+t)}for(const[t,n]of d.entries())n.connect(m,0,e+t),n.start(0);return m.connect(c.destination),await Promise.all(l.map((e=>f(s,c,e)))),v(c)};_=Ue(s,0===n?null:await c(),b,g,A,y,l)}const e=await _,t=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[c,u,d]=M;null!==e&&(t.buffer=e,t.start(0)),t.connect(c);for(let e=0,t=0;e<s.numberOfOutputs;e+=1){const n=u[e];for(let r=0;r<A[e];r+=1)c.connect(n,t+r,r);t+=A[e]}return d}if(E)for(const[t,n]of s.parameters.entries())await e(b,n,C.parameters.get(t));else for(const[e,t]of s.parameters.entries())await p(b,t,C.parameters.get(e));return await f(s,b,C),C})(b,C)}}})(hn,Or,pn,An,it,kn,lt,Tr,Ir,gr,_e,Jt,zt,fn,Vt,Xn),Ur=(e=>t=>e.get(t))(yr),Lr=(e=>(t,n)=>{e.set(t,n)})(Nr),Br=mr?((e,t,n,r,o,a,i,s,c,l,u,d,h,p)=>class extends t{constructor(t,u,h){var p;const f=s(t),v=c(f),m=(e=>({...e,outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},(()=>1))}))({...ke,...h});(e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}})(m);const g=U.get(f),y=null==g?void 0:g.get(u),w=v||"closed"!==f.state?f:null!==(p=i(f))&&void 0!==p?p:f,_=o(w,v?null:t.baseLatency,l,u,y,m);super(t,!0,_,v?r(u,m,y):null);const b=[];_.parameters.forEach(((e,t)=>{const r=n(this,v,e);b.push([t,r])})),this._nativeAudioWorkletNode=_,this._onprocessorerror=null,this._parameters=new Ne(b),v&&e(f,this);const{activeInputs:C}=a(this);d(_,C)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"==typeof e?p(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(xr,Kt,mn,Dr,Rr,ie,Ur,jt,Xt,Jt,0,Lr,0,Tt):void 0,Pr=((e,t,n,r,o)=>class extends r{constructor(e={}){if(null===o)throw new Error("Missing the native AudioContext constructor.");let r;try{r=new o(e)}catch(e){if(12===e.code&&"sampleRate is not in range"===e.message)throw t();throw e}if(null===r)throw n();if(!(e=>void 0===e||"number"==typeof e||"string"==typeof e&&("balanced"===e||"interactive"===e||"playback"===e))(e.latencyHint))throw new TypeError(`The provided value '${e.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==e.sampleRate&&r.sampleRate!==e.sampleRate)throw t();super(r,2);const{latencyHint:a}=e,{sampleRate:i}=r;if(this._baseLatency="number"==typeof r.baseLatency?r.baseLatency:"balanced"===a?512/i:"interactive"===a||void 0===a?256/i:"playback"===a?1024/i:128*Math.max(2,Math.min(128,Math.round(a*i/128)))/i,this._nativeAudioContext=r,"webkitAudioContext"===o.name?(this._nativeGainNode=r.createGain(),this._nativeOscillatorNode=r.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(r.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===r.state){this._state="suspended";const e=()=>{"suspended"===this._state&&(this._state=null),r.removeEventListener("statechange",e)};r.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),ce(this.destination,[])})))}resume(){return"suspended"===this._state?new Promise(((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(Ye,pt,yt,Qn,Gt),Fr=(((e,t)=>{})(pt,zt),((e,t,n,r,o,a,i,s)=>{})(nn,Dt,Ft,Ar,Xn,J,sn,cn),"Missing AudioWorklet support. Maybe this is not running in a secure context.");var Vr=n(87);const Wr=(e,t)=>{if(t>=e.byteLength)return null;const n=e.getUint8(t);if(n>127)return 1;if(n>63)return 2;if(n>31)return 3;if(n>15)return 4;if(n>7)return 5;if(n>3)return 6;if(n>1)return 7;if(n>0)return 8;const r=Wr(e,t+1);return null===r?null:r+8},jr=[],qr="undefined"==typeof window?null:window,zr=(ao=(e=>null!==e&&void 0!==e.BlobEvent?e.BlobEvent:null)(qr),(e,t)=>{if(null===ao)throw new Error("A native BlobEvent could not be created.");return new ao(e,t)}),Xr=((e,t,n,r)=>(o,a,i)=>{var s;const c=null===(s=a.getAudioTracks()[0])||void 0===s?void 0:s.getSettings().sampleRate,l=new Pr({latencyHint:"playback",sampleRate:c}),h=Math.max(1024,Math.ceil(l.baseLatency*l.sampleRate)),p=new ln({length:h,sampleRate:l.sampleRate}),f=[],v=b((e=>{if(void 0===_r)throw new Error(Fr);return _r(l,e)}));let m=null,g=null,y=null,w=null,_=!0;const M=t=>{o.dispatchEvent(e("dataavailable",{data:new Blob(t,{type:i})}))},E=async(e,t)=>{const n=await u(e,t);null===y?f.push(...n):(M(n),w=E(e,t))},A=()=>(_=!0,l.resume()),x=()=>{null!==y&&(null!==m&&(a.removeEventListener("addtrack",m),a.removeEventListener("removetrack",m)),null!==g&&clearTimeout(g),y.then((async({encoderId:e,mediaStreamAudioSourceNode:t,recorderAudioWorkletNode:n})=>{null!==w&&(w.catch((()=>{})),w=null),await n.stop(),t.disconnect(n);const r=await u(e,null);null===y&&await O(),M([...f,...r]),f.length=0,o.dispatchEvent(new Event("stop"))})),y=null)},O=()=>(_=!1,l.suspend());return O(),{get mimeType(){return i},get state(){return null===y?"inactive":_?"recording":"paused"},pause(){if(null===y)throw n();_&&(O(),o.dispatchEvent(new Event("pause")))},resume(){if(null===y)throw n();_||(A(),o.dispatchEvent(new Event("resume")))},start(e){var s;if(null!==y)throw n();if(a.getVideoTracks().length>0)throw r();o.dispatchEvent(new Event("start"));const c=a.getAudioTracks(),u=0===c.length?2:null!==(s=c[0].getSettings().channelCount)&&void 0!==s?s:2;y=Promise.all([A(),v.then((()=>(async(e,t,n,r,o)=>{const{encoderId:a,port:i}=await d(o,t.sampleRate);if(void 0===Br)throw new Error(Fr);return{audioBufferSourceNode:new yn(t,{buffer:e}),encoderId:a,mediaStreamAudioSourceNode:new Mr(t,{mediaStream:r}),port:i,recorderAudioWorkletNode:C(Br,t,{channelCount:n})}})(p,l,u,a,i)))]).then((async([,{audioBufferSourceNode:t,encoderId:n,mediaStreamAudioSourceNode:r,port:o,recorderAudioWorkletNode:a}])=>(r.connect(a),await new Promise((e=>{t.onended=e,t.connect(a),t.start(l.currentTime+h/l.sampleRate)})),t.disconnect(a),await a.record(o),void 0!==e&&(w=E(n,e)),{encoderId:n,mediaStreamAudioSourceNode:r,recorderAudioWorkletNode:a})));const f=a.getTracks();m=()=>{x(),o.dispatchEvent(new ErrorEvent("error",{error:t()}))},a.addEventListener("addtrack",m),a.addEventListener("removetrack",m),g=setInterval((()=>{const e=a.getTracks();e.length===f.length&&!e.some(((e,t)=>e!==f[t]))||null===m||m()}),1e3)},stop:x}})(zr,((e="")=>{try{return new DOMException(e,"InvalidModificationError")}catch(t){return t.code=13,t.message=e,t.name="InvalidModificationError",t}}),(()=>{try{return new DOMException("","InvalidStateError")}catch(e){return e.code=11,e.name="InvalidStateError",e}}),p),Yr=(e=>(t,n)=>{const r=e(t,n);if(null===r)return r;const o=n+Math.floor((r-1)/8);if(o+r>t.byteLength)return null;let a=t.getUint8(o)&(1<<8-r%8)-1;for(let e=1;e<r;e+=1)a=(a<<8)+t.getUint8(o+e);return{length:r,value:a}})(Wr),Zr=(e=>(t,n,r,o=2)=>{const a=e(t,n);if(null===a)return a;const{length:i,value:s}=a;if("master"===r)return{content:null,length:i};if(n+i+s>t.byteLength)return null;if("binary"===r){const e=(s/Float32Array.BYTES_PER_ELEMENT-1)/o,r=Array.from({length:o},(()=>new Float32Array(e)));for(let a=0;a<e;a+=1){const e=a*o+1;for(let s=0;s<o;s+=1)r[s][a]=t.getFloat32(n+i+(e+s)*Float32Array.BYTES_PER_ELEMENT,!0)}return{content:r,length:i+s}}return{content:null,length:i+s}})(Yr),Gr=(e=>(t,n)=>{const r=e(t,n);if(null===r)return r;const{length:o,value:a}=r;return 35===a?{length:o,type:"binary"}:46===a||97===a||88713574===a||106212971===a||139690087===a||172351395===a||256095861===a?{length:o,type:"master"}:{length:o,type:"unknown"}})(Yr),$r=((e,t)=>(n,r,o)=>{const a=[];let i=r,s=0;for(;s<n.byteLength;)if(null===i){const e=t(n,s);if(null===e)break;const{length:r,type:o}=e;i=o,s+=r}else{const t=e(n,s,i,o);if(null===t)break;const{content:r,length:c}=t;i=null,s+=c,null!==r&&a.push(r)}return{contents:a,currentElementType:i,offset:s}})(Zr,Gr),Hr=((e,t,n)=>(r,o,a,i)=>{const s=[],c=new o(a,{mimeType:"audio/webm;codecs=pcm"});let l=null,h=()=>{};const p=t=>{r.dispatchEvent(e("dataavailable",{data:new Blob(t,{type:i})}))},f=async(e,t)=>{const n=await u(e,t);"inactive"===c.state?s.push(...n):(p(n),l=f(e,t))},v=()=>{"inactive"!==c.state&&(null!==l&&(l.catch((()=>{})),l=null),h(),h=()=>{},c.stop())};return c.addEventListener("error",(e=>{v(),r.dispatchEvent(new ErrorEvent("error",{error:e.error}))})),c.addEventListener("pause",(()=>r.dispatchEvent(new Event("pause")))),c.addEventListener("resume",(()=>r.dispatchEvent(new Event("resume")))),c.addEventListener("start",(()=>r.dispatchEvent(new Event("start")))),{get mimeType(){return i},get state(){return c.state},pause:()=>c.pause(),resume:()=>c.resume(),start(e){const[o]=a.getAudioTracks();if(void 0!==o&&"inactive"===c.state){const{channelCount:a,sampleRate:v}=o.getSettings();if(void 0===a)throw new Error("The channelCount is not defined.");if(void 0===v)throw new Error("The sampleRate is not defined.");let m=!1,g=!1,y=0,w=d(i,v);h=()=>{g=!0};const b=_(c,"dataavailable")((({data:e})=>{y+=1;const o=e.arrayBuffer();w=w.then((async({dataView:e=null,elementType:i=null,encoderId:l,port:d})=>{const h=await o;y-=1;const f=null===e?new Vr.MultiBufferDataView([h]):new Vr.MultiBufferDataView([...e.buffers,h],e.byteOffset);if(!m&&"recording"===c.state&&!g){const t=n(f,0);if(null===t)return{dataView:f,elementType:i,encoderId:l,port:d};const{value:r}=t;if(172351395!==r)return{dataView:e,elementType:i,encoderId:l,port:d};m=!0}const{currentElementType:v,offset:w,contents:_}=t(f,i,a),C=w<f.byteLength?new Vr.MultiBufferDataView(f.buffers,f.byteOffset+w):null;return _.forEach((e=>d.postMessage(e,e.map((({buffer:e})=>e))))),0!==y||"inactive"!==c.state&&!g||(u(l,null).then((e=>{p([...s,...e]),s.length=0,r.dispatchEvent(new Event("stop"))})),d.postMessage([]),d.close(),b()),{dataView:C,elementType:v,encoderId:l,port:d}}))}));void 0!==e&&w.then((({encoderId:t})=>l=f(t,e)))}c.start(100)},stop:v}})(zr,$r,Yr),Qr=(e=>()=>{if(null===e)throw new Error("A native EventTarget could not be created.");return e.document.createElement("p")})(qr),Jr=(e=>null===e||void 0===e.MediaRecorder?null:e.MediaRecorder)(qr),Kr=((e,t,n,r,o,a,i)=>class extends a{constructor(a,s={}){const{mimeType:c}=s;if(null!==i&&(void 0===c||void 0!==i.isTypeSupported&&i.isTypeSupported(c))){const t=e(i,a,s);super(t),this._internalMediaRecorder=t}else{if(void 0===c||!o.some((e=>e.test(c))))throw null!==i&&e(i,a,s),t();super(),null!==i&&void 0!==i.isTypeSupported&&i.isTypeSupported("audio/webm;codecs=pcm")?this._internalMediaRecorder=r(this,i,a,c):this._internalMediaRecorder=n(this,a,c)}this._ondataavailable=null,this._onerror=null,this._onpause=null,this._onresume=null,this._onstart=null,this._onstop=null}get mimeType(){return this._internalMediaRecorder.mimeType}get ondataavailable(){return null===this._ondataavailable?this._ondataavailable:this._ondataavailable[0]}set ondataavailable(e){if(null!==this._ondataavailable&&this.removeEventListener("dataavailable",this._ondataavailable[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("dataavailable",t),this._ondataavailable=[e,t]}else this._ondataavailable=null}get onerror(){return null===this._onerror?this._onerror:this._onerror[0]}set onerror(e){if(null!==this._onerror&&this.removeEventListener("error",this._onerror[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("error",t),this._onerror=[e,t]}else this._onerror=null}get onpause(){return null===this._onpause?this._onpause:this._onpause[0]}set onpause(e){if(null!==this._onpause&&this.removeEventListener("pause",this._onpause[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("pause",t),this._onpause=[e,t]}else this._onpause=null}get onresume(){return null===this._onresume?this._onresume:this._onresume[0]}set onresume(e){if(null!==this._onresume&&this.removeEventListener("resume",this._onresume[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("resume",t),this._onresume=[e,t]}else this._onresume=null}get onstart(){return null===this._onstart?this._onstart:this._onstart[0]}set onstart(e){if(null!==this._onstart&&this.removeEventListener("start",this._onstart[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("start",t),this._onstart=[e,t]}else this._onstart=null}get onstop(){return null===this._onstop?this._onstop:this._onstop[0]}set onstop(e){if(null!==this._onstop&&this.removeEventListener("stop",this._onstop[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("stop",t),this._onstop=[e,t]}else this._onstop=null}get state(){return this._internalMediaRecorder.state}pause(){return this._internalMediaRecorder.pause()}resume(){return this._internalMediaRecorder.resume()}start(e){return this._internalMediaRecorder.start(e)}stop(){return this._internalMediaRecorder.stop()}static isTypeSupported(e){return null!==i&&void 0!==i.isTypeSupported&&i.isTypeSupported(e)||o.some((t=>t.test(e)))}})((e=>(t,n,r)=>{const o=new Map,a=new WeakMap,i=new WeakMap,s=[],c=new t(n,r),l=new WeakMap;var u,d,h,p;return c.addEventListener("stop",(({isTrusted:e})=>{e&&setTimeout((()=>s.shift()))})),c.addEventListener=(u=c.addEventListener,(e,t,n)=>{let r=t;if("function"==typeof t)if("dataavailable"===e){const e=[];r=n=>{const[[r,o]=[!1,!1]]=s;r&&!o?e.push(n):t.call(c,n)},o.set(t,e),a.set(t,r)}else"error"===e?(r=e=>{e instanceof ErrorEvent?t.call(c,e):t.call(c,new ErrorEvent("error",{error:e.error}))},i.set(t,r)):"stop"===e&&(r=e=>{for(const[e,t]of o.entries())if(t.length>0){const[n]=t;t.length>1&&Object.defineProperty(n,"data",{value:new Blob(t.map((({data:e})=>e)),{type:n.data.type})}),t.length=0,e.call(c,n)}t.call(c,e)},l.set(t,r));return u.call(c,e,r,n)}),c.removeEventListener=(d=c.removeEventListener,(e,t,n)=>{let r=t;if("function"==typeof t)if("dataavailable"===e){o.delete(t);const e=a.get(t);void 0!==e&&(r=e)}else if("error"===e){const e=i.get(t);void 0!==e&&(r=e)}else if("stop"===e){const e=l.get(t);void 0!==e&&(r=e)}return d.call(c,e,r,n)}),c.start=(h=c.start,t=>{if(void 0!==r.mimeType&&r.mimeType.startsWith("audio/")&&n.getVideoTracks().length>0)throw e();return"inactive"===c.state&&s.push([void 0!==t,!0]),void 0===t?h.call(c):h.call(c,t)}),c.stop=(p=c.stop,()=>{"inactive"!==c.state&&(s[0][1]=!1),p.call(c)}),c})(p),p,Xr,Hr,jr,((e,t)=>class{constructor(t=null){this._listeners=new WeakMap,this._nativeEventTarget=null===t?e():t}addEventListener(e,t,n){if(null!==t){let a=this._listeners.get(t);void 0===a&&(r=this,o=t,a=e=>{const t={value:r};return Object.defineProperties(e,{currentTarget:t,target:t}),"function"==typeof o?o.call(r,e):o.handleEvent.call(r,e)},"function"==typeof t&&this._listeners.set(t,a)),this._nativeEventTarget.addEventListener(e,a,n)}var r,o}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(Qr),Jr),eo=o({characterize:({call:e})=>()=>e("characterize"),encode:({call:e})=>(t,n)=>e("encode",{recordingId:t,timeslice:n}),record:({call:e})=>async(t,n,r)=>{await e("record",{recordingId:t,sampleRate:n,typedArrays:r},r.map((({buffer:e})=>e)))}}),to=new Blob(['(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,s=536870912,a=2*s,o=function(e,t){return function(r){var o=t.get(r),i=void 0===o?r.size:o<a?o+1:0;if(!r.has(i))return e(r,i);if(r.size<s){for(;r.has(i);)i=Math.floor(Math.random()*a);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,l=r(i),c=o(l,i),u=t(c);e.addUniqueNumber=u,e.generateUniqueNumber=c}(t)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,s=(e,t)=>Object.assign(new Error(e),{status:t}),a=t=>s(\'The handler of the method called "\'.concat(t,\'" returned an unexpected result.\'),e),o=(t,r)=>async o=>{let{data:{id:i,method:l,params:c}}=o;const u=r[l];try{if(void 0===u)throw(e=>s(\'The requested method called "\'.concat(e,\'" is not supported.\'),n))(l);const r=void 0===c?u():u(c);if(void 0===r)throw(t=>s(\'The handler of the method called "\'.concat(t,\'" returned no required result.\'),e))(l);const o=r instanceof Promise?await r:r;if(null===i){if(void 0!==o.result)throw a(l)}else{if(void 0===o.result)throw a(l);const{result:e,transferables:r=[]}=o;t.postMessage({id:i,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:i})}};var i=r(455);const l=new Map,c=(e,r,n)=>({...r,connect:t=>{let{port:n}=t;n.start();const s=e(n,r),a=(0,i.generateUniqueNumber)(l);return l.set(a,(()=>{s(),n.close(),l.delete(a)})),{result:a}},disconnect:e=>{let{portId:r}=e;const n=l.get(r);if(void 0===n)throw(e=>s(\'The specified parameter called "portId" with the given value "\'.concat(e,\'" does not identify a port connected to this worker.\'),t))(r);return n(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),u=function(e,t){const r=c(u,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=o(e,r);return e.addEventListener("message",n),()=>e.removeEventListener("message",n)},d=e=>e.reduce(((e,t)=>e+t.length),0),h=(e,t)=>{const r=[];let n=0;e:for(;n<t;){const t=e.length;for(let s=0;s<t;s+=1){const t=e[s];void 0===r[s]&&(r[s]=[]);const a=t.shift();if(void 0===a)break e;r[s].push(a),0===s&&(n+=a.length)}}if(n>t){const s=n-t;r.forEach(((t,r)=>{const n=t.pop(),a=n.length-s;t.push(n.subarray(0,a)),e[r].unshift(n.subarray(a))}))}return r},f=new Map,m=(e=>(t,r,n)=>{const s=e.get(t);if(void 0===s){const s={channelDataArrays:n.map((e=>[e])),isComplete:!0,sampleRate:r};return e.set(t,s),s}return s.channelDataArrays.forEach(((e,t)=>e.push(n[t]))),s})(f),p=((e,t)=>(r,n,s,a)=>{const o=s>>3,i="subsequent"===n?0:44,l=r.length,c=e(r[0]),u=new ArrayBuffer(c*l*o+i),d=new DataView(u);return"subsequent"!==n&&t(d,s,l,"complete"===n?c:Number.POSITIVE_INFINITY,a),r.forEach(((e,t)=>{let r=i+t*o;e.forEach((e=>{const t=e.length;for(let n=0;n<t;n+=1){const t=e[n];d.setInt16(r,t<0?32768*Math.max(-1,t):32767*Math.min(1,t),!0),r+=l*o}}))})),[u]})(d,((e,t,r,n,s)=>{const a=t>>3,o=Math.min(n*r*a,4294967251);e.setUint32(0,1380533830),e.setUint32(4,o+36,!0),e.setUint32(8,1463899717),e.setUint32(12,1718449184),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,r,!0),e.setUint32(24,s,!0),e.setUint32(28,s*r*a,!0),e.setUint16(32,r*a,!0),e.setUint16(34,t,!0),e.setUint32(36,1684108385),e.setUint32(40,o,!0)})),v=new Map;u(self,{characterize:()=>({result:/^audio\\/wav$/}),encode:e=>{let{recordingId:t,timeslice:r}=e;const n=v.get(t);void 0!==n&&(v.delete(t),n.reject(new Error("Another request was made to initiate an encoding.")));const s=f.get(t);if(null!==r){if(void 0===s||d(s.channelDataArrays[0])*(1e3/s.sampleRate)<r)return new Promise(((e,n)=>{v.set(t,{reject:n,resolve:e,timeslice:r})}));const e=h(s.channelDataArrays,Math.ceil(r*(s.sampleRate/1e3))),n=p(e,s.isComplete?"initial":"subsequent",16,s.sampleRate);return s.isComplete=!1,{result:n,transferables:n}}if(void 0!==s){const e=p(s.channelDataArrays,s.isComplete?"complete":"subsequent",16,s.sampleRate);return f.delete(t),{result:e,transferables:e}}return{result:[],transferables:[]}},record:e=>{let{recordingId:t,sampleRate:r,typedArrays:n}=e;const s=m(t,r,n),a=v.get(t);if(void 0!==a&&d(s.channelDataArrays[0])*(1e3/r)>=a.timeslice){const e=h(s.channelDataArrays,Math.ceil(a.timeslice*(r/1e3))),n=p(e,s.isComplete?"initial":"subsequent",16,r);s.isComplete=!1,v.delete(t),a.resolve({result:n,transferables:n})}return{result:null}}})})()})();'],{type:"application/javascript; charset=utf-8"}),no=URL.createObjectURL(to),ro=(e=>{const t=new Worker(e);return eo(t)})(no),oo=(ro.characterize,ro.connect);var ao;ro.disconnect,ro.encode,ro.isSupported,ro.record,URL.revokeObjectURL(no);let io=null,so=[],co=null,lo=!1,uo=null;function ho(e){e&&(console.log("AudioBLOBBBB",e),fetch("https://us-central1-accesibilityimagereader.cloudfunctions.net/audio_processing",{method:"POST",headers:{"Content-Type":"audio/webm"},body:e}).then((e=>e.json())).then((e=>{console.log(e.alt_text),io.stop()})).catch((e=>{console.error("Error fetching alt text:",e)})))}function po(e){const t=e.target;t.alt||function(e){fetch("https://us-central1-accesibilityimagereader.cloudfunctions.net/get_alt_text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_url:e.src})}).then((e=>e.json())).then((t=>{e.alt=t.alt_text||"No alt text available",e.removeEventListener("mouseenter",po)})).catch((e=>{console.error("Error fetching alt text:",e)}))}(t)}!async function(){await(async e=>{jr.push(await h(e))})(await oo())}(),document.addEventListener("mouseover",(function(e){"img"===e.target.tagName.toLowerCase()&&(uo=e.target.src,console.log("Image URL:",uo))})),document.addEventListener("keydown",(function(e){"a"===e.key&&(lo?(console.log("Stop recording"),new Promise((e=>{io?(io.addEventListener("stop",(()=>{const t=io.mimeType,n=new Blob(so,{type:t});co&&co.getTracks().forEach((e=>e.stop())),e(n)})),io.stop(),lo=!1):e(null)})).then(ho)):(console.log("Start recording"),console.log(uo),navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0}}).then((e=>{so=[],co=e,io=new Kr(e,{mimeType:"audio/webm"}),io.addEventListener("dataavailable",(e=>{so.push(e.data)})),io.start(),lo=!0})).catch((e=>{console.error(e)}))))}));for(var fo=document.getElementsByTagName("img"),vo=0,mo=fo.length;vo<mo;vo++)fo[vo].addEventListener("mouseenter",po)})()})();